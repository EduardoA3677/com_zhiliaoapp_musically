.class public abstract LX/0Vzm;
.super LX/101b;
.source "SourceFile"


# direct methods
.method public constructor <init>()V
    .locals 0

    invoke-direct {p0}, LX/101b;-><init>()V

    return-void
.end method


# virtual methods
.method public final LIZ()Lcom/bytedance/hybrid/spark/security/web_js/setting/JSInjectConfig;
    .locals 14

    new-instance v1, Lcom/bytedance/hybrid/spark/security/web_js/setting/JSInjectConfig;

    const-string v2, "_jsmanage_ad_autofill_sixthversion"

    const-string v3, "custom_manual"

    const/4 v4, 0x1

    const-string v0, "."

    invoke-static {v0}, Ljava/util/Collections;->singletonList(Ljava/lang/Object;)Ljava/util/List;

    move-result-object v5

    sget-object v6, LX/0Pgk;->INSTANCE:LX/0Pgk;

    const-string v7, "https://lf16-gecko-source.tiktokcdn.com/obj/tiktok-teko-source-sg/tt/webview/js_manage/tiktok_webview_js_inject_manage/assets/js/ad_autofill_sixthversion.js"

    const/4 v8, 0x0

    const/4 v11, 0x0

    const/16 v12, 0x1c0

    move-object v9, v8

    move-object v10, v8

    move-object v13, v8

    invoke-direct/range {v1 .. v13}, Lcom/bytedance/hybrid/spark/security/web_js/setting/JSInjectConfig;-><init>(Ljava/lang/String;Ljava/lang/String;ILjava/util/List;Ljava/util/List;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ZILkotlin/jvm/internal/DefaultConstructorMarker;)V

    return-object v1
.end method

.method public final LJ()Ljava/lang/String;
    .locals 2

    new-instance v1, Ljava/lang/StringBuilder;

    const v0, 0x1e4fc

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(I)V

    const-string v0, "!function(){\"use strict\";var t=function(){return(t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function e(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))}function n(t,e){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create((\"function\"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError(\"Generator is already executing.\");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function i(t){var e=\"function\"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&\"number\"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function r(t,e){var n=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function o(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}\"function\"==typeof SuppressedError&&SuppressedError;function a(){console.log(\"bridge\");var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function e(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n,i=function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t[t.Failure=0]=\"Failure\",t[t.Success=1]=\"Success\",t[t.Unauthorized=-1]=\"Unauthorized\",t[t.NotExist=-2]=\"NotExist\"}(n||(n={}));var r=\"undefined\"==typeof __PIA_WORKER__?1023:1023e5,o=function(){function t(t){this.version=t.version||\"2.0.3\",this.nativeMethodInvoker=t.nativeMethodInvoker,this.nativeEventListener=t.nativeEventListener,this.scheme=t.scheme||\"nativeapp://\",this.dispatchMessagePath=t.dispatchMessagePath||\"dispatch_message/\",this.setResultPath=t.setResultPath||\"private/setresult/SCENE_FETCHQUEUE\",this.dispatchMessageIFrameId=t.dispatchMessageIFrameId||\"__JSBridgeIframe__\",this.setResultIFrameId=t.setResultIFrameId||\"__JSBridgeIframe_SetResult__\",this.listenNativeEvent=!0===t.listenNativeEvent,this.callbackId=r,this.callbackMap={},this.eventMap={},this.javascriptMessageQueue=[],this.callbackProcessor=t.callbackProcessor}return t.prototype.call=function(t,e,n,i){void 0===i&&(i=this.version);var r,o=this.version;if(t&&\"string\"==typeof t){\"object\"!=typeof e&&(e={}),\"string\"==typeof i?o=i||this.version:\"object\"==typeof i&&(r=i.namespace,o=i.sdkVersion||this.version);var a={func:t,params:e,JSSDK:o,__msg_type:\"call\",namespace:r};if(\"function\"==typeof n||void 0===n){var s=this.registerCallback(t,n);a.__callback_id=s}\"undefined\"==typeof __PIA_WORKER__&&window.parent!==window&&(a.__iframe_url=window.location.href),this.sendMessageToNative(a)}},t.prototype.on=function(t,e,n){if(void 0===n&&(n=!1),t&&\"string\"==typeof t&&\"function\"==typeof e){var i=this.registerCallback(t,e);return this.eventMap[t]=this.eventMap[t]||{},this.eventMap[t][i]={once:n},this.listenNativeEvent&&(this.nativeEventListener?this.nativeEventListener(t):this.call(\"addEventListener\",{name:t},null,{sdkVersion:1})),i}},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.off=function(t,e){if(!t||\"string\"!=typeof t)return!0;var n=this.eventMap[t];return!n||\"object\"!=typeof n||!n.hasOwnProperty(e)||(this.deregisterCallback(e),delete n[e],!0)},t.prototype.trigger=function(t,e){return this.handleMessageFromNative({__msg_type:\"event\",__params:e,__event_id:t})},t.prototype.handleMessageFromNative=function(t){var e=this,n=t,i=String(n.__callback_id);if(this.callbackProcessor&&\"function\"==typeof this.callbackProcessor){var r=(this.callbackMap&&this.callbackMap[i]||{}).method;this.callbackProcessor(n,r)}var o=n.__params,a=String(n.__event_id||\"\"),s=n.__msg_type;this.callbackMap[i]?s=\"callback\":this.eventMap[i]&&(s=\"event\",a=a||i);var l={__err_code:\"cb404\"};switch(s){case\"callback\":var u=(this.callbackMap&&this.callbackMap[i]||{}).callback;\"function\"==typeof u&&(l=u(o)),this.deregisterCallback(i);break;case\"event\":var c=this.eventMap[a];c&&\"object\"==typeof c&&Object.keys(c).forEach((function(t){var n=(e.callbackMap&&e.callbackMap[t]||{}).callback,i=c[t];\"function\"==typeof n&&(l=n(o)),i&&i.once&&(e.deregisterCallback(t),delete c[t])}))}return l},t.prototype.fetchJavaScriptMessageQueue=function(){var t=JSON.stringify(this.javascriptMessageQueue),e=btoa(unescape(encodeURIComponent(t)));return this.setResultIFrame&&this.javascriptMessageQueue.length>0&&(this.setResultIFrame.src=\"\"+this.scheme+this.setResultPath+\"&\"+e),this.javascriptMessageQueue.splice(0,this.javascriptMessageQueue.length),t},t.prototype.sendMessageToNative=function(t){if(\"1\"!==String(t.JSSDK)&&this.nativeMethodInvoker){var e=this.nativeMethodInvoker(t);if(e){var n=JSON.parse(e);this.handleMessageFromNative(n)}}else this.javascriptMessageQueue.push(t),this.dispatchMessageIFrame||this.tryCreateIFrames(),this.dispatchMessageIFrame.src=\"\"+this.scheme+this.dispatchMessagePath},t.prototype.registerCallback=function(t,e){var n=String(this.callbackId++);return this.callbackMap[n]={method:t,callback:e},n},t.prototype.deregisterCallback=function(t){delete this.callbackMap[t]},t.prototype.tryCreateIFrames=function(){this.dispatchMessageIFrame=this.createIFrame(this.dispatchMessageIFrameId),this.setResultIFrame=this.createIFrame(this.setResultIFrameId)},t.prototype.createIFrame=function(t){var e=document.getElementById(t);return e&&\"IFRAME\"===e.tagName||((e=document.createElement(\"iframe\")).style.display=\"none\",e.id=t,document.documentElement.appendChild(e)),e},t}(),a=\"undefined\"!=typeof __PIA_WORKER__?new Function(\"return this\")():\"undefined\"!=typeof window?window:{},s=void 0!==a&&a.navigator?a.navigator.userAgent:\"\",l=(!!s.match(/(newsarticle|videoarticle|lv|faceu|ulike|beauty_me_|faceu-os|ulike-os|beauty_me_oversea_|retouch)\\/([\\d.]+)/i)||/super|automobile/gi.test(s))&&!/webcast/gi.test(s)&&!/luckycatversion/gi.test(s),u=!!s.match(/(faceu)\\/([\\d.]+)/i)||/gsdk/gi.test(s)||/PIANativeWorker/gi.test(s),c=!!s.match(/ttad\\/0/i),d=!!s.match(/aweme|trill|musical_ly|phoenix_\\d+|TikTokNow_\\d+|alligatortiktok/i),f=!!s.match(/live_stream/i),p=!!s.match(/Webcast/i),h=!!s.match(/super/i),_=!!s.match(/life_service_merchant/i),y=/super/gi.test(s);function m(){var t;if(l)return a.JSBridge&&a.JSBridge.on?t=a.JSBridge.on:a.JS2NativeBridge&&a.JS2NativeBridge.on?t=function(t){var e={JSSDK:\"2.2.17\",__msg_type:\"event\",__callback_id:t,func:t};a.JS2NativeBridge.on(t,JSON.stringify(e))}:a.webkit&&a.webkit.messageHandlers&&a.webkit.messageHandlers.onMethodParams?t=function(t){var e={JSSDK:\"2.2.17\",__msg_type:\"event\",__callback_id:t,func:t};a.webkit.messageHandlers.onMethodParams.postMessage(e)}:a.onMethodParams&&(t=function(t){var e={JSSDK:\"2.2.17\",__msg_type:\"event\",__callback_id:t,func:t};return a.onMethodParams(t,e)}),t}function g(t,e){if((\"string\"!=typeof e||!0!==/^(x|tc)\\./.test(e))&&(d||f||p||_)){var n=t.__params;a.JS2NativeBridge&&a.JS2NativeBridge._invokeMethod&&(t.__params=i({code:n.code},n.data))}}var v=function(t){function n(){var e=t.call(this,{version:\"2.2.17\",scheme:\"bytedance://\",listenNativeEvent:!0,dispatchMessageIFrameId:\"__JSBridgeIframe_1.0__\",setResultIFrameId:\"__JSBridgeIframe_SetResult_1.0__\",nativeEventListener:m(),callbackProcessor:g})||this;return e.publicApi={call:e.call.bind(e),on:e.on.bind(e),once:e.once.bind(e),off:e.off.bind(e),trigger:e.trigger.bind(e),_fetchQueue:e.fetchJavaScriptMessageQueue.bind(e),_handleMessageFromToutiao:e.handleMessageFromNative.bind(e)},e}return e(n,t),n.prototype.exposePublicApiToGlobal=function(){a.ToutiaoJSBridge=Object.assign(a.ToutiaoJSBridge||{},this.publicApi)},n}(o),b=function(t){function n(e){var n,i=t.call(this,{version:\"2.2.17\",nativeMethodInvoker:(a.JS2NativeBridge&&a.JS2NativeBridge._invokeMethod?n=function(t){return a.JS2NativeBridge._invokeMethod(JSON.stringify(t))}:a.ToutiaoJSBridge&&a.ToutiaoJSBridge.invokeMethod?n=function(t){return a.ToutiaoJSBridge.invokeMethod(JSON.stringify(t))}:a.JS2NativeBridge&&a.JS2NativeBridge.call?n=function(t){return a.JS2NativeBridge.call(t.func,JSON.stringify(t))}:a.webkit&&a.webkit.messageHandlers&&a.webkit.messageHandlers.callMethodParams?n=function(t){a.webkit.messageHandlers.callMethodParams.postMessage(t)}:a.callMethodParams&&(n=function(t){return a.callMethodParams(t.func,t)}),n),nativeEventListener:m(),scheme:h?\"bds://\":y?\"bytedance://\":l||a.JSBridge&&a.JSBridge._invokeMethod?\"nativeapp://\":\"bytedance://\",listenNativeEvent:l,callbackProcessor:g})||this;return i.toutiaoLegacyJSB=e,i.publicApi={call:i.call.bind(i),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),trigger:i.trigger.bind(i),_fetchQueue:i.fetchJavaScriptMessageQueue.bind(i),_handleMessageFromApp:i.handleMessageFromNative.bind(i),_handleMessageFromToutiao:i.handleMessageFromNative.bind(i)},i}return e(n,t),n.prototype.call=function(e,n,i,r){void 0===r&&(r=\"2.2.17\"),this.isLegacyCall(e)?this.toutiaoLegacyJSB.call(e,n,i,r):t.prototype.call.call(this,e,n,i,r)},n.prototype.on=function(e,n,i,r){return void 0===i&&(i=!1),(r||{}).useLegacy||this.isLegacyCall(e)?this.toutiaoLegacyJSB.on(e,n,i):t.prototype.on.call(this,e,n,i)},n.prototype.once=function(e,n){return this.isLegacyCall(e)?this.toutiaoLegacyJSB.once(e,n):t.prototype.once.call(this,e,n)},n.prototype.off=function(e,n){return this.isLegacyCall(e)?this.toutiaoLegacyJSB.off(e,n):t.prototype.off.call(this,e,n)},n.prototype.trigger=function(e,n){return this.isLegacyCall(e)?this.toutiaoLegacyJSB.trigger(e,n):t.prototype.trigger.call(this,e,n)},n.prototype.exposePublicApiToGlobal=function(){var t=this;a.JSBridge=Object.assign(a.JSBridge||{},this.publicApi),a.__DISABLE_JSB_PROTOCAL2__||(a.Native2JSBridge=Object.assign(a.Native2JSBridge||{},this.publicApi)),y?a.ToutiaoJSBridge=Object.assign(a.ToutiaoJSBridge||{},this.publicApi):(l||c)&&this.toutiaoLegacyJSB?this.toutiaoLegacyJSB.exposePublicApiToGlobal():a.ToutiaoJSBridge=Object.assign(a.ToutiaoJSBridge||{},this.publicApi),a.parent!==a&&a.addEventListener&&a.addEventListener(\"message\",(function(e){e&&e.data&&e.data.__callback_id&&t.handleMessageFromNative(e.data)}),!1),Object.defineProperties(a,{JSBridge:{writable:!1},Native2JSBridge:{writable:!1},ToutiaoJSBridge:{writable:!1}}),Object.freeze(a.JSBridge),Object.freeze(a.Native2JSBridge),Object.freeze(a.ToutiaoJSBridge)},n.prototype.isLegacyCall=function(t){return!(!t||\"string\"!=typeof t||!this.toutiaoLegacyJSB)&&(!!c||!u&&!y&&(l&&t.indexOf(\".\")<0))},n}(o);function w(t,e){if(null==t)throw new TypeError(\"Cannot convert first argument to object\");for(var n=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o=Object.keys(Object(r)),a=0,s=o.length;a<s;a++){var l=o[a],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(n[l]=r[l])}}return n}({assign:w,polyfill:function(){Object.assign||Object.defineProperty(Object,\"assign\",{enumerable:!1,configurable:!0,writable:!0,value:w})}}).polyfill();var S=new b(new v);try{console.warn(\"[Bridge] This version has Break Change, please pay attention to compatibility, more details: https://zjsms.com/JXKorkC/\"),S.exposePublicApiToGlobal()}catch(t){console.warn(t.message)}}var s,l,u=function(){function t(){this.Payment_Field=[\"cardNumber\",\"exp_month\",\"exp_year\",\"exp_date\"],this.pv_id=(new Date).getTime()+Math.random().toString(36).slice(2),this.adInfo={cid:0,log_extra:\"\",web_url:\"\"},this.is_first_page=-1,this.autoFillInfo={},this.platform=-1,this.autoFillField=[],this.paymentField=[],this.switchAutoFill=!1,this.switchContact=!1,this.switchPayment=!1,this.contactInfo_status=-1,this.paymentInfo_status=-1,this.canUseContact=!1,this.canUsePayment=!1,this.canAutoFill=!1,this.is_pipo_update=!1,this.pipo_paymentInfo_status=-1,this.pipo_payment_count=0,this.is_need_popup=!0,this.is_need_show_contactall=!0,this.fail_reason=0,this.iframeScope=[],this.paymentCount=0,this.noKeyReason=-1,this._jsInitTime=0,this._mainframe_load=0,this.jsInitTime=(new Date).getTime(),this.performance_time=window.performance.timing}return t.prototype.initAdInfo=function(t,e){void 0===e&&(e={first_page:1,platform:-1});var n=\"string\"==typeof t?JSON.parse(t):t;if(this.adInfo={cid:n.cid||n.ad_id,log_extra:n.log_extra,web_url:n.url},this.extraData=e,\"/** extraData **/\"!=e){var i=\"string\"==typeof e?JSON.parse(e):e;this.is_first_page=i.first_page,this.platform=i.platform?i.platform:-1}},t.prototype.initAutofillInfo=function(t){this.autoFillInfo=\"string\"==typeof t?JSON.parse(t):t;var e=this.autoFillInfo;this.autoFillField=\"string\"==typeof e.contactInfoFields?JSON.parse(e.contactInfoFields):e.contactInfoFields,this.canUseContact=!1,this.canUsePayment=!1,this.canAutoFill=!1,this.switchAutoFill=!1,this.switchContact=!1,this.switchPayment=!1,this.canUseContact=0==e.contactInfoStatus&&this.autoFillField.length>0,this.canUsePayment=0==e.paymentInfoStatus,this.canAutoFill=this.canUseContact||this.canUsePayment,this.switchAutoFill=0==e.contactInfoStatus||0==e.paymentInfoStatus||2==e.paymentInfoStatus,this.switchContact=0==e.contactInfoStatus,this.switchPayment=0==e.paymentInfoStatus||2==e.paymentInfoStatus,this.contactInfo_status=e.contactInfoStatus,this.paymentInfo_status=e.paymentInfoStatus,this.is_pipo_update?(this.autoFillInfo.pipoPaymentInfoStatus=this.pipo_paymentInfo_status,this.autoFillInfo.pipoPaymentCount=this.pipo_payment_count):(this.pipo_paymentInfo_status=e.pipoPaymentInfoStatus,this.pipo_payment_count=e.pipoPaymentCount),this.paymentCount=e.paymentCount,0==e.paymentInfoStatus||0==this.pipo_paymentInfo_status?this.paymentField=this.Payment_Field:this.paymentField=[],this.is_need_popup=e.isNeedPopup,null!=this.is_need_popup&&null!=this.is_need_popup||(this.is_need_popup=!0),this.is_need_show_contactall=e.isNeedShowContactAll,this.fail_reason=e.failReason},t.prototype.updatePipoPaymentCount=function(t){this.is_pipo_update=!0;var e=\"string\"==typeof t?JSON.parse(t):t;1===e.is_success?(e.count>0?(this.pipo_paymentInfo_status=0,this.paymentField=this.Payment_Field):(this.pipo_paymentInfo_status=2,0!=this.paymentInfo_status&&(this.paymentField=[])),this.pipo_payment_count=e.count):this.pipo_paymentInfo_status=4,this.autoFillInfo.pipoPaymentInfoStatus=this.pipo_paymentInfo_status,this.autoFillInfo.pipoPaymentCount=this.pipo_payment_count},Object.defineProperty(t.prototype,\"jsInitTime\",{get:function(){return this._jsInitTime},set:function(t){this._jsInitTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"performance_time\",{get:function(){return this._performance_time},set:function(t){this._performance_time=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"mainframe_load\",{get:function(){return this._mainframe_load=this.performance_time.loadEventStart-this.performance_time.navigationStart,this._mainframe_load},set:function(t){this._mainframe_load=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,\"ins\",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t}();!function(t){t.GET=\"get_autofill\",t.TRIGGER=\"trigger_autofill\",t.HANDSHAKE1=\"hand_shake1\",t.HANDSHAKE2=\"hand_shake2\",t.GET_SUBMIT=\"get_submit\",t.TRIGGER_SUBMIT=\"trigger_submit\",t.RECEIVE_SUBMIT=\"receive_submit\",t.TRIGGER_AUTOFILL_SUBMIT=\"trigger_autofill_success\",t.RECEIVE_AUTOFILL_SUBMIT=\"receive_autofill_success\",t.IFRAME_SUBMIT=\"iframe_submit\",t.AUTOFILL_POPUP_CHANGE=\"autofill_popup_change\",t.SET_IFRAME_DATA=\"set_iframe_data\",t.SET_AI_STRUCTURE=\"set_ai_structure\",t.HANDSHANKE_TIMEOUT=\"handshake_timeout\",t.IFRAME_NO_SCOPE=\"iframe_no_scope\",t.IFRAME_HAVE_SCOPE=\"iframe_have_scope\",t.SET_FOCUS=\"set_focus\",t.RESET_DATA=\"reset_data\",t.IFRAME_TO_MAIN_SENDCLICK=\"iframe_to_main_sendclick\",t.MAIN_TO_IFRAME_REMOVESELECT=\"main_to_iframe_removeselect\",t.LP_BUTTON_CLICK=\"lp_button_click\",t.IFRAME_TO_JSB=\"iframe_to_jsb\",t.IFRAME_TO_MAIN_EDITINPUT=\"iframe_to_main_editinput\"}(s||(s={})),function(t){t.PENDING=\"pending\",t.FULFILLED=\"fulfilled\"}(l||(l={}));var c=function(){function i(){this.status=l.PENDING,this.origin=\"\",this.source=null,this.iframeSourceList=[],this.startTime=0,this.iframescope=[],this._isInit=!1,this._data=u.ins}return Object.defineProperty(i.prototype,\"iframeList\",{get:function(){return this.iframeSourceList},enumerable:!1,configurable:!0}),i.prototype.initHandshake=function(){return e(this,void 0,Promise,(function(){return n(this,(function(t){return this._isInit?[2]:(this._isInit=!0,this.startTime=(new Date).getTime(),window===window.top?[2,this.initMainFrameHandshake()]:[2,this.initIframeHandshake()])}))}))},i.prototype.initMainFrameHandshake=function(){var t=this;return new Promise((function(e){window.addEventListener(\"message\",t.handleMainFrameMessage.bind(t)),e()}))},i.prototype.initIframeHandshake=function(){var t=this;return new Promise((function(e,n){window.addEventListener(\"message\",t.handleIframeMessage.bind(t));var i=t._data.performance_time.loadEventStart-t._data.performance_time.navigationStart;t.polling(1,e,n,i)}))},i.prototype.polling=function(t,e,n,i){var r=this;if(void 0===t&&(t=1),Date.now()-this.startTime>3e4)return this.postMessageToMainFrame(s.HANDSHANKE_TIMEOUT,{iframescope:u.ins.iframeScope,load:i,url:window.location.href,path:new URL(window.location.href).pathname}),clearTimeout(this.pollingTimeoutId),void n();this.status!==l.FULFILLED?(this.postMessageToMainFrame(s.HANDSHAKE1,{iframescope:u.ins.iframeScope,load:i,url:window.location.href,path:new URL(window.location.href).pathname}),this.pollingTimeoutId=setTimeout((function(){r.polling(t+1,e,n,i)}),1e3)):clearTimeout(this.pollingTimeoutId)},i.prototype.handleMainFrameMessage=function(t){var e,n=t.data,i=t.origin,r=t.source;switch(n.event_name,n.event_name){case s.HANDSHAKE1:this.handleHandshake1(n,i,r);break;case s.GET:this.handleGet(n,i,r);break;case s.RECEIVE_SUBMIT:this.handleReceiveSubmit(n);break;case s.TRIGGER_AUTOFILL_SUBMIT:this.handleTriggerAutofillSubmit(n);break;case s.IFRAME_SUBMIT:this.handleIframeSubmit();break;case s.AUTOFILL_POPUP_CHANGE:this.handleAutofillPopupChange(n);break;case s.HANDSHANKE_TIMEOUT:this.handleHandshakeTimeout(n,i);break;case s.IFRAME_NO_SCOPE:this.handleIframeNoScope(n,i);break;case s.IFRAME_HAVE_SCOPE:this.handleIframeHaveScope(n,i);break;case s.IFRAME_TO_MAIN_SENDCLICK:this.handleIframeSendClick(n);break;case s.LP_BUTTON_CLICK:this.handleSendPaymentEvent(n);case s.IFRAME_TO_JSB:this.handleSendJSB(n);case s.IFRAME_TO_MAIN_EDITINPUT:null===(e=this.sendEventV3)||void 0===e||e.call(this,\"lp_edit_input_info\",n.point_data)}},i.prototype.handleIframeMessage=function(t){var e,n,i,r,o,a,u,c,d=t.data;switch(d.event_name){case s.HANDSHAKE2:this.status===l.PENDING&&(this.status=l.FULFILLED,null===(e=this.onHandshake2Complete)||void 0===e||e.call(this,d));break;case s.TRIGGER:null===(n=this.onTrigger)||void 0===n||n.call(this,d);break;case s.SET_IFRAME_DATA:this._data.pipo_paymentInfo_status=d.pipo_paymentInfo_status,this._data.pipo_payment_count=d.pipo_payment_count,this._data.paymentField=d.paymentField,null===(i=this.onSetIframeData)||void 0===i||i.call(this,d);break;case s.SET_AI_STRUCTURE:console.log(\"[IframeController][IFRAME] SET_AI_STRUCTURE received from main frame\"),null===(r=this.onSetAIStructure)||void 0===r||r.call(this,d);break;case s.GET_SUBMIT:null===(o=this.onGetSubmit)||void 0===o||o.call(this);break;case s.SET_FOCUS:null===(a=this.onSetFocus)||void 0===a||a.call(this);break;case s.RESET_DATA:null===(u=this.resetData)||void 0===u||u.call(this,d);break;case s.MAIN_TO_IFRAME_REMOVESELECT:null===(c=this.removeSelect)||void 0===c||c.call(this)}},i.prototype.handleHandshake1=function(t,e,n){var i,r;n&&e&&(this.iframeSourceList.some((function(t){return t.origin===e&&t.source===n}))||this.iframeSourceList.push({origin:e,source:n,iframescope:t.iframescope}));null===(i=this.onHandshake1)||void 0===i||i.call(this,t,e,n),null==n||n.postMessage({event_name:s.HANDSHAKE2,autoFillInfo:this._data.autoFillInfo,adInfo:this._data.adInfo,extraData:this._data.extraData},e),null===(r=this.sendEventV3)||void 0===r||r.call(this,\"lp_have_iframe_info\",{iframe_scope:JSON.stringify(t.iframescope),iframe_load:t.load,hand_shake_time:(new Date).getTime()-u.ins.jsInitTime,origin:t.url,iframe_path:e+t.path})},i.prototype.handleGet=function(t,e,n){var i;this.source=n,this.origin=e,null===(i=this.onGet)||void 0===i||i.call(this,t,e,n)},i.prototype.handleReceiveSubmit=function(t){var e;null===(e=this.onReceiveSubmit)||void 0===e||e.call(this,t)},i.prototype.handleTriggerAutofillSubmit=function(t){var e,n,i;null===(e=this.sendEventV3)||void 0===e||e.call(this,\"lp_js_autofill_success\",t.point_data),null===(n=this.onTriggerAutofillSubmit)||void 0===n||n.call(this,t),null===(i=this.onIframeSendToJSB)||void 0===i||i.call(this,null==t?void 0:t.paymentInfo)},i.prototype.handleIframeSubmit=function(){var t;null===(t=this.onIframeSubmit)||void 0===t||t.call(this)},i.prototype.handleAutofillPopupChange=function(t){var e;null===(e=this.onAutofillPopupChange)||void 0===e||e.call(this,t)},i.prototype.handleHandshakeTimeout=function(t,e){var n;null===(n=this.sendEventV3)||void 0===n||n.call(this,\"lp_iframe_handshake_timeout\",{iframe_scope:JSON.stringify(t.iframescope),iframe_load:t.load,hand_shake_time:(new Date).getTime()-this._data.jsInitTime,origin:t.url,iframe_path:e+t.path})},i.prototype.handleIframeNoScope=function(t,e){var n;null===(n=this.sendEventV3)||void 0===n||n.call(this,\"lp_iframe_no_scope_info\",{autofill_scope_fields:JSON.stringify(t.all_autofill_scope),out_scope_input_fields:JSON.stringify(t.all_out_scope_autofill),origin:t.url,iframe_path:e+t.path})},i.prototype.handleIframeHaveScope=function(t,e){var n;null===(n=this.sendEventV3)||void 0===n||n.call(this,\"lp_iframe_have_scope_info\",{iframe_scope:JSON.stringify(t.iframescope),is_have_hiden_input:t.have_hiden,origin:t.url,iframe_path:e+t.path})},i.prototype.handleIframeSendClick=function(t){var e;null===(e=this.onIframeSendClick)||void 0===e||e.call(this,t)},i.prototype.handleSendPaymentEvent=function(e){var n,i;(null==e?void 0:e.logInfo)&&(null===(n=null==e?void 0:e.logInfo)||void 0===n?void 0:n.buttonType)&&(null===(i=this.sendEventV3)||void 0===i||i.call(this,null==e?void 0:e.event_name,t(t({},null==e?void 0:e.logInfo),{sendInfoFrom:\"iframe\"})))},i.prototype.handleSendJSB=function(t){var e;null===(e=this.onIframeSendToJSB)||void 0===e||e.call(this,t)},i.prototype.postMessageToIframes=function(e,n){this.iframeSourceList.forEach((function(i){var r=i.source,o=i.origin;o&&r&&(null==r||r.postMessage(t({event_name:e},n),o))}))},i.prototype.postMessageToMainFrame=function(e,n){var i;null===(i=window.top)||void 0===i||i.postMessage(t({event_name:e},n),\"*\")},i}(),d={first_name:[\"firstname\",\"first_name\",\"first name\",\"given_name\",\"given name\"],last_name:[\"lastname\",\"last_name\",\"last name\",\"family_name\",\"family name\"],email:[\"email\",\"mail\"],zip_code:[\"zip\",\"post\"],address:[\"address\"],city:[\"city\"],mobile:[\"phone\",\"tel\"],unit:[\"unit\",\"apartment\",\"suite\"],state:[\"province\",\"state\"],country:[\"country\"],cardNumber:[\"cc-number\"],exp_month:[\"cc-exp-month\"],exp_year:[\"cc-exp-year\"],exp_date:[\"cc-exp\"]},f={first_name:/given.*name|first.*name|fname/i,last_name:/family.*name|last.*name|lname/i,email:/e.?mail/i,zip_code:/zip|postal|post.*code/i,address:/address.*line|address.?1|addr.?1|street|address.*one/i,city:/city|town/i,mobile:/phone|tel|mobile|cell?ular/i,unit:/address.*line2|address.?2|addr.?2|suite|unit|apartment|address.*two/i,state:/region|province|state/i,country:/country/i,cardNumber:/^credit.*num.*$|^card.*num.*$|ccnum|^cc.*num.*$|source.*number/i,exp_month:/expiry.*month|card.*month|exp.*month|credit.*month/i,exp_year:/expiry.*year|card.*year|exp.*year|credit.*year/i,exp_date:/MM.*YY|cardExpiry|card.*validity|card.*expiry|expiryDate/i},p={first_name:/vorname|initials|first$|nombre|\u00d9\u2020\u00d8\u00a7\u00d9\u2026|forename|pr\u00c3\u00a9nom|prenom|\u00e0\u00a4\u00a8\u00e0\u00a4\u00be\u00e0\u00a4\u00ae|nama depan|\u00ec\u009d\u00b4\u00eb\u00a6\u201e|\u00e0\u00b4\u00aa\u00e0\u00b5\u2021\u00e0\u00b4\u00b0\u00e0\u00b5\u008d|\u00d0\u02dc\u00d0\u00bc\u00d1\u008f/i,last_name:/nachname|surname|last$|secondname|apellidos?|famille|\u00e0\u00a4\u2030\u00e0\u00a4\u00aa\u00e0\u00a4\u00a8\u00e0\u00a4\u00be\u00e0\u00a4\u00ae|nama belakang|cognome|\u00e0\u00b4\u00ae\u00e0\u00b4\u00b1\u00e0\u00b5\u0081\u00e0\u00b4\u00aa\u00e0\u00b5\u2021\u00e0\u00b4\u00b0\u00e0\u00b5\u008d|apelidos|surename|\u00d0\u00a4\u00d0\u00b0\u00d0\u00bc\u00d0\u00b8\u00d0\u00bb\u00d0\u00b8\u00d1\u008f|sobrenome|\u00d9\u2020\u00d8\u00a7\u00d9\u2026.*\u00d8\u00ae\u00d8\u00a7\u00d9\u2020\u00d9\u02c6\u00d8\u00a7\u00d8\u00af\u00da\u00af\u00db\u0152/i,email:/correo.*electr(o|\u00c3\u00b3)nico|courriel|\u00e0\u00a4\u02c6\u00e0\u00a4\u00ae\u00e0\u00a5\u2021\u00e0\u00a4\u00b2|\u00e0\u00a4\u2021\u00e0\u00a4\u00b2\u00e0\u00a5\u2026\u00e0\u00a4\u2022\u00e0\u00a5\u008d\u00e0\u00a4\u0178\u00e0\u00a5\u008d\u00e0\u00a4\u00b0\u00e0\u00a5\u2030\u00e0\u00a4\u00a8\u00e0\u00a4\u00bf\u00e0\u00a4\u2022.?\u00e0\u00a4\u00ae\u00e0\u00a5\u2021\u00e0\u00a4\u00b2|\u00e3\u0192\u00a1\u00e3\u0192\u00bc\u00e3\u0192\u00ab\u00e3\u201a\u00a2\u00e3\u0192\u2030\u00e3\u0192\u00ac\u00e3\u201a\u00b9|(?:\u00ec\u009d\u00b4\u00eb\u00a9\u201d\u00ec\u009d\u00bc|\u00ec \u201e\u00ec\u017e\u0090.?\u00ec\u0161\u00b0\u00ed\u017d\u00b8|[Ee]-?mail)(.?\u00ec\u00a3\u00bc\u00ec\u2020\u0152)?|\u00e0\u00b4\u2021-\u00e0\u00b4\u00ae\u00e0\u00b5\u2020\u00e0\u00b4\u00af\u00e0\u00b4\u00bf\u00e0\u00b4\u00b2\u00e0\u00b5\u008d\u00e2\u20ac\u008d|\u00e0\u00b4\u2021\u00e0\u00b4\u00b2\u00e0\u00b4\u2022\u00e0\u00b5\u008d\u00e0\u00b4\u0178\u00e0\u00b5\u008d\u00e0\u00b4\u00b0\u00e0\u00b5\u2039\u00e0\u00b4\u00a3\u00e0\u00b4\u00bf\u00e0\u00b4\u2022\u00e0\u00b5\u008d.?\u00e0\u00b4\u00ae\u00e0\u00b5\u2020\u00e0\u00b4\u00af\u00e0\u00b4\u00bf\u00e0\u00b5\u00bd|\u00d0\u00ad\u00d0\u00bb\u00d0\u00b5\u00d0\u00ba\u00d1\u201a\u00d1\u20ac\u00d0\u00be\u00d0\u00bd\u00d0\u00bd(\u00d0\u00b0\u00d1\u008f|\u00d0\u00be\u00d0\u00b9).?\u00d0\u0178\u00d0\u00be\u00d1\u2021\u00d1\u201a(\u00d0\u00b0|\u00d1\u2039)|\u00e9\u201a\u00ae\u00e4\u00bb\u00b6|\u00e9\u201a\u00ae\u00e7\u00ae\u00b1|\u00e9\u203a\u00bb\u00e5\u00ad\u0090\u00e9\u0192\u00b5\u00e4\u00bb\u00b6|\u00e9\u203a\u00bb\u00e9\u0192\u00b5\u00e5\u0153\u00b0\u00e5\u009d\u20ac|\u00e9\u203a\u00bb\u00e5\u00ad\u0090\u00e4\u00bf\u00a1\u00e7\u00ae\u00b1/i,zip_code:/pcode|pin.?code|\\\\bcp\\\\b|\u00e0\u00a4\u00aa\u00e0\u00a4\u00bf\u00e0\u00a4\u00a8.?\u00e0\u00a4\u2022\u00e0\u00a5\u2039\u00e0\u00a4\u00a1|kode.?pos|\u00e9\u0192\u00b5\u00e4\u00be\u00bf\u00e7\u2022\u00aa\u00e5\u008f\u00b7|\u00ec\u0161\u00b0\u00ed\u017d\u00b8.?\u00eb\u00b2\u02c6\u00ed\u02dc\u00b8|\u00e0\u00b4\u00aa\u00e0\u00b4\u00bf\u00e0\u00b4\u00a8\u00e0\u00b5\u008d\u00e2\u20ac\u008d\u00e0\u00b4\u2022\u00e0\u00b5\u2039\u00e0\u00b4\u00a1\u00e0\u00b5\u008d|kod.?pocztowy|codigo|codpos|\u00d0\u0178\u00d0\u00be\u00d1\u2021\u00d1\u201a\u00d0\u00be\u00d0\u00b2\u00d1\u2039\u00d0\u00b9.?\u00d0\u02dc\u00d0\u00bd\u00d0\u00b4\u00d0\u00b5\u00d0\u00ba\u00d1\u0081|\u00e9\u201a\u00ae\u00e6\u201d\u00bf\u00e7\u00bc\u2013\u00e7 \u0081|\u00e9\u201a\u00ae\u00e7\u00bc\u2013|\u00e9\u0192\u00b5\u00e9\u0081\u017e\u00e5\u008d\u20ac\u00e8\u2122\u0178/i,address:/(?:shipping|billing)address$|house.?name|strasse|stra\u00c3\u0178e|direcci[\u00c3\u00b3o]n.*1|^alamat|indirizzo|^\u00e4\u00bd\u008f\u00e6\u2030\u20ac$|\u00e4\u00bd\u008f\u00e6\u2030\u20ac1|^\u00ec\u00a3\u00bc\u00ec\u2020\u0152.?$|\u00ec\u00a3\u00bc\u00ec\u2020\u0152.?1|ulica|ulicy|morada|endere\u00c3\u00a7o|\u00d0\u0090\u00d0\u00b4\u00d1\u20ac\u00d0\u00b5\u00d1\u0081|\u00e5\u0153\u00b0\u00e5\u009d\u20ac|Direcci\u00c3\u00b3n Exacta/i,city:/suburb|\\\\bort\\\\b|stadt|ciudad|localidad|poblacion|\u00d8\u00b4\u00d9\u2021\u00d8\u00b1|ville|commune|\u00e0\u00a4\u00b6\u00e0\u00a4\u00b9\u00e0\u00a4\u00b0|\u00e0\u00a4\u2014\u00e0\u00a5\u008d\u00e0\u00a4\u00b0\u00e0\u00a4\u00be\u00e0\u00a4\u00ae|\u00e0\u00a4\u2014\u00e0\u00a4\u00be\u00e0\u00a4\u0081\u00e0\u00a4\u00b5|kota|kabupaten|citt[\u00c3 a]\\\\b|localita|\u00e5\u00b8\u201a\u00e5\u0152\u00ba\u00e7\u201d\u00ba\u00e6\u009d\u2018|^\u00ec\u2039\u0153[^\u00eb\u008f\u201e\u00c2\u00b7\u00e3\u0192\u00bb]|\u00ec\u2039\u0153[\u00c2\u00b7\u00e3\u0192\u00bb]?\u00ea\u00b5\u00b0[\u00c2\u00b7\u00e3\u0192\u00bb]?\u00ea\u00b5\u00ac|\u00e0\u00b4\u00a8\u00e0\u00b4\u2014\u00e0\u00b4\u00b0\u00e0\u00b4\u201a|\u00e0\u00b4\u2014\u00e0\u00b5\u008d\u00e0\u00b4\u00b0\u00e0\u00b4\u00be\u00e0\u00b4\u00ae\u00e0\u00b4\u201a|miasto|miejscowo\u00c5\u203a\u00c4\u2021|cidade|\u00d0\u201c\u00d0\u00be\u00d1\u20ac\u00d0\u00be\u00d0\u00b4|\u00d0\u009d\u00d0\u00b0\u00d1\u0081\u00d0\u00b5\u00d0\u00bb(\u00d0\u00b5|\u00d1\u2018)\u00d0\u00bd\u00d0\u00bd\u00d1\u2039\u00d0\u00b9.?\u00d0\u00bf\u00d1\u0192\u00d0\u00bd\u00d0\u00ba\u00d1\u201a|\u00e5\u00b8\u201a|\u00e5\u02c6\u2020\u00e5\u008d\u20ac/i,mobile:/contact.?number|telefonnummer|telefono|tel\u00c3\u00a9fono|telfixe|\u00e0\u00a4\u00ae\u00e0\u00a5\u2039\u00e0\u00a4\u00ac\u00e0\u00a4\u00be\u00e0\u00a4\u2021\u00e0\u00a4\u00b2|telepon|ponsel|\u00e9\u203a\u00bb\u00e8\u00a9\u00b1|(?:\u00ec \u201e\u00ed\u2122\u201d|\u00ed\u2022\u00b8\u00eb\u201c\u0153\u00ed\u008f\u00b0|\u00ed\u0153\u00b4\u00eb\u0152\u20ac\u00ed\u008f\u00b0|\u00ed\u0153\u00b4\u00eb\u0152\u20ac\u00ec \u201e\u00ed\u2122\u201d)(?:.?\u00eb\u00b2\u02c6\u00ed\u02dc\u00b8)?|\u00e0\u00b4\u00ae\u00e0\u00b5\u0160\u00e0\u00b4\u00ac\u00e0\u00b5\u02c6\u00e0\u00b4\u00b2\u00e0\u00b5\u008d\u00e2\u20ac\u008d|telefone|telemovel|\u00d1\u201a\u00d0\u00b5\u00d0\u00bb\u00d0\u00b5\u00d1\u201e\u00d0\u00be\u00d0\u00bd|\u00e7\u201d\u00b5\u00e8\u00af\u009d/i,unit:/adresszusatz|erg\u00c3\u00a4nzende.?angaben|adresszeile 2|direcci[\u00c3\u00b3o]n.*2|informaci[\u00c3\u00b3o]n\\\\s*adicional|complemento.*direcci[\u00c3\u00b3o]n|indirizzo2|\u00e4\u00bd\u008f\u00e6\u2030\u20ac2|\u00ec\u00a3\u00bc\u00ec\u2020\u0152.?2|\u00d0\u00a3\u00d0\u00bb\u00d0\u00b8\u00d1\u2020\u00d0\u00b0|\u00e5\u0153\u00b0\u00e5\u009d\u20ac2|Una referencia de la direccion/i,state:/zone|county|principality|\u00e0\u00a4\u00b0\u00e0\u00a4\u00be\u00e0\u00a4\u0153\u00e0\u00a5\u008d\u00e0\u00a4\u00af|\u00d0\u00be\u00d0\u00b1\u00d0\u00bb\u00d0\u00b0\u00d1\u0081\u00d1\u201a\u00d1\u0152|\u00e7\u0153\u0081|\u00e5\u0153\u00b0\u00e5\u008d\u20ac|provinsi|propinsi|estado|provincia|\u00e9\u0192\u00bd\u00e9\u0081\u201c\u00e5\u00ba\u0153\u00e7\u0153\u0152|\u00e0\u00b4\u00b8\u00e0\u00b4\u201a\u00e0\u00b4\u00b8\u00e0\u00b5\u008d\u00e0\u00b4\u00a5\u00e0\u00b4\u00be\u00e0\u00b4\u00a8\u00e0\u00b4\u201a|^\u00ec\u2039\u0153[\u00c2\u00b7\u00e3\u0192\u00bb]?\u00eb\u008f\u201e|\u00d8\u00a7\u00d8\u00b3\u00d8\u00aa\u00d8\u00a7\u00d9\u2020/i,country:/countries|pa\u00c3\u00ads|pais|negara|\u00e5\u203a\u00bd|\u00ea\u00b5\u00ad\u00ea\u00b0\u20ac|\u00eb\u201a\u02dc\u00eb\u009d\u00bc|\u00e5\u203a\u00bd\u00e5\u00ae\u00b6/i,cardNumber:/(?:card|cc|acct).?(?:number|#|no|num|field(?!s)|pan)|0000 ?0000 ?0000 ?0000|1234 ?1234 ?1234 ?1234|^xxxx ?xxxx ?xxxx ?xxxx$|no.*kartu|\u00e3\u201a\u00ab\u00e3\u0192\u00bc\u00e3\u0192\u2030\u00e7\u2022\u00aa\u00e5\u008f\u00b7|\u00ec\u00b9\u00b4\u00eb\u201c\u0153|\u00d0\u009d\u00d0\u00be\u00d0\u00bc\u00d0\u00b5\u00d1\u20ac.*\u00d0\u00ba\u00d0\u00b0\u00d1\u20ac\u00d1\u201a\u00d1\u2039|\u00e4\u00bf\u00a1\u00e7\u201d\u00a8\u00e5\u008d\u00a1\u00e5\u008f\u00b7|\u00e4\u00bf\u00a1\u00e7\u201d\u00a8\u00e5\u008d\u00a1\u00e5\u008d\u00a1\u00e8\u2122\u0178/i,exp_month:/\u00e6\u0153\u2030\u00e6\u2022\u02c6\u00e6\u0153\u0178\u00e2\u20ac\u201d\u00e2\u20ac\u201d\u00e6\u0153\u02c6/i,exp_year:/\u00e6\u0153\u2030\u00e6\u2022\u02c6\u00e6\u0153\u0178\u00e2\u20ac\u201d\u00e2\u20ac\u201d\u00e5\u00b9\u00b4/i,exp_date:/\u00e6\u0153\u2030\u00e6\u2022\u02c6\u00e6\u0153\u0178\u00e2\u20ac\u201d\u00e2\u20ac\u201d\u00e6\u2014\u00a5\u00e6\u0153\u0178/i},h={first_name:/First Name|\u00ec\u009d\u00b4\u00eb\u00a6\u201e|Pr\u00c3\u00a9nom|Vorname|Nome|\u00d0\u02dc\u00d0\u00bc\u00d1\u008f|Nombre|\u00e0\u00a4\u00a8\u00e0\u00a4\u00be\u00e0\u00a4\u00ae/i,last_name:/Last Name|Family Name|\u00ec\u201e\u00b1|Surname|Nachname|Cognome|\u00d0\u00a4\u00d0\u00b0\u00d0\u00bc\u00d0\u00b8\u00d0\u00bb\u00d0\u00b8\u00d1\u008f|Apellido|\u00e0\u00a4\u2030\u00e0\u00a4\u00aa\u00e0\u00a4\u00a8\u00e0\u00a4\u00be\u00e0\u00a4\u00ae/i,email:/Email|\u00e3\u0192\u00a1\u00e3\u0192\u00bc\u00e3\u0192\u00ab\u00e3\u201a\u00a2\u00e3\u0192\u2030\u00e3\u0192\u00ac\u00e3\u201a\u00b9|\u00ec\u009d\u00b4\u00eb\u00a9\u201d\u00ec\u009d\u00bc|E-mail|Courriel|E-Mail|Posta elettronica|\u00e0\u00a4\u02c6\u00e0\u00a4\u00ae\u00e0\u00a5\u2021\u00e0\u00a4\u00b2/i,zip_code:/Zip Code|Post Code|\u00e9\u0192\u00b5\u00e4\u00be\u00bf\u00e7\u2022\u00aa\u00e5\u008f\u00b7|Postleitzahl|Codice postale/i,address:/Address|\u00e4\u00bd\u008f\u00e6\u2030\u20ac|\u00ec\u00a3\u00bc\u00ec\u2020\u0152|Adresse|Indirizzo|\u00d0\u0090\u00d0\u00b4\u00d1\u20ac\u00d0\u00b5\u00d1\u0081|Direcci\u00c3\u00b3n/i,city:/City|\u00e5\u00b8\u201a|\u00e5\u00b8\u201a\u00e5\u0152\u00ba\u00e7\u201d\u00ba\u00e6\u009d\u2018|Ville|Stadt|Citt\u00c3 |\u00d0\u201c\u00d0\u00be\u00d1\u20ac\u00d0\u00be\u00d0\u00b4|Ciudad|\u00e0\u00a4\u00b6\u00e0\u00a4\u00b9\u00e0\u00a4\u00b0/i,mobile:/Phone|Mobile|Tel|\u00e9\u203a\u00bb\u00e8\u00a9\u00b1|\u00ed\u0153\u00b4\u00eb\u0152\u20ac\u00ed\u008f\u00b0|Telefon|Telefono|\u00d0\u00a2\u00d0\u00b5\u00d0\u00bb\u00d0\u00b5\u00d1\u201e\u00d0\u00be\u00d0\u00bd|Tel\u00c3\u00a9fono/i,unit:/Unit|Suite|\u00e4\u00bd\u008f\u00e6\u2030\u20ac3|\u00ec\u00a3\u00bc\u00ec\u2020\u0152|Appartement/i,state:/State|Province|\u00e9\u0192\u00bd\u00e9\u0081\u201c\u00e5\u00ba\u0153\u00e7\u0153\u0152|Estado|\u00e0\u00a4\u00b0\u00e0\u00a4\u00be\u00e0\u00a4\u0153\u00e0\u00a5\u008d\u00e0\u00a4\u00af/i,country:/Country|\u00e5\u203a\u00bd\u00e5\u00ae\u00b6|\u00eb\u201a\u02dc\u00eb\u009d\u00bc|Land|Pa\u00c3\u00ads/i,cardNumber:/Card Number|\u00e3\u201a\u00ab\u00e3\u0192\u00bc\u00e3\u0192\u2030\u00e7\u2022\u00aa\u00e5\u008f\u00b7/i,exp_month:/Expiry Month|\u00e6\u0153\u2030\u00e5\u0160\u00b9\u00e6\u0153\u0178\u00e9\u2122\u0090|\u00e6\u0153\u02c6/i,exp_year:/Expiry Year|\u00e6\u0153\u2030\u00e5\u0160\u00b9\u00e6\u0153\u0178\u00e9\u2122\u0090|\u00e5\u00b9\u00b4/i,exp_date:/Expiry Date|\u00e6\u0153\u2030\u00e5\u0160\u00b9\u00e6\u0153\u0178\u00e9\u2122\u0090/i},_=1,y=0;function m(t,e){void 0===e&&(e={});var n=function(t,e,n,i,r){void 0===i&&(i=!1);void 0===r&&(r={});var o=t.querySelectorAll(\"input\");i&&(o=t.querySelectorAll(\"input,select\"));for(var a=r,s=0;s<o.length;s++){var l=o[s];if(L(l,i)){var u=T(l);if(null!=u&&n.includes(u))!(null===l.value||\"\"===l.value||l.value.match(/^[ ]*$/))&&e||(a[u]?a[u].push(l):a[u]=[l])}}return a}(t,!1,Object.keys(d),!0),i=e,r=/^(\\+\\d+)?[-|\\s]?([\\d-\\s]{3,17})$/,o=/^(\\(\\d+\\))[-|\\s]?([\\d-\\s]{3,17})$/;for(var a in n){var s=void 0;if(s=\"mobile\"===a?n[a].find((function(t){return r.test(t.value)||o.test(t.value)})):\"email\"===a?n[a].find((function(t){return/^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(t.value)})):n[a].find((function(t){return t.value})))if(\"mobile\"===a){var l=s.value;/^(\\(\\d+\\))[-|\\s]?([\\d-\\s]{3,17})$/.test(l)&&(l=(l=l.replace(\"(\",\"+\")).replace(\")\",\" \")),l=/^\\+\\d+$/.test(l)?l.replace(\"+\",\"\"):(l=(l=l.replace(/^(\\+\\d+)?[-|\\s]?([\\d-\\s]{3,17})$/,(function(t,e,n){return e?(\"0\"===e[1]&&(e=e.replace(\"+\",\"\")),e+\" \"+n.replace(/\\s/g,\"\")):n.replace(/\\s/g,\"\")}))).trimStart()).replace(/-/g,\"\"),i[a]=l}else i[a]=s.value}return i}function g(t){var e=[],n=[],i=[],r=[],o=[],a=t.form instanceof HTMLFormElement?t.form:null;if(!a){var s={id:t.id,type:t.type,placeholder:t.placeholder,name:t.name},l=E(t),u=null==l?void 0:l.key,c=null==l?void 0:l.is_new_regtags,d=null==l?void 0:l.is_new_attribute,f=null==l?void 0:l.recognition_type;return u?(i.push(u),e.push(s),\"cardNumber\"==u||\"exp_month\"==u||\"exp_year\"==u||\"exp_date\"==u?o.push(u):r.push(u)):n.push(s),{autofill_scope_fields:e,out_scope_input_fields:n,autofill_fields:i,paymentinfo_fileds:o,contactinfo_fileds:r,recognition_regtags_status:c,recognition_attribute_status:d,recognition_type:f}}return b(a)}function v(t){if(!t)return null;var e=F(t),n=M(t),i=O(t),r=i.key,o=J(t),a=o.key,s=e||r||n||a,l=null;return!s||!a||e||r||n||(l=o.recognition_type),{key:s,is_new_attribute:i.is_new_attribute,is_new_regtags:i.is_new_regtags,recognition_type:l}}function b(t,e){void 0===e&&(e=!1);var n,i,r=[],o=[],a=[],s=[],l=[],u=[],c=0,d=!1,f=!1,p=!1,h=!1,_=\"\",y=!1,m=t.querySelectorAll(\"input\");e&&(m=t.querySelectorAll(\"input, select\"));for(var g=0;g<m.length;g++){var b=m[g];if(j(b)){var S=v(b);d||(null==S?void 0:S.is_new_attribute)||(d=!0),!f&&(null==S?void 0:S.is_new_attribute)&&(f=!0),p||(null==S?void 0:S.is_new_regtags)||(p=!0),!h&&(null==S?void 0:S.is_new_regtags)&&(h=!0),\"label\"===(null==S?void 0:S.recognition_type)&&(y=!0);var k=null==S?void 0:S.key,I={id:b.id,type:b.type,placeholder:b.placeholder,name:b.name,aria_label:b[\"aria-label\"]?b[\"aria-label\"]:\"null\",aria_labelledby:b[\"aria-labelledby\"]?b[\"aria-labelledby\"]:\"null\",aria_description:b.aria_description?b.aria_description:\"null\"};R(b)&&(n=b,i=void 0,void 0,i=window.getComputedStyle(n),\"none\"!==i.display&&\"hidden\"!==i.visibility&&\"0\"!==i.opacity&&\"rect(0 0 0 0)\"!==i.clip&&\"rect(0px, 0px, 0px, 0px)\"!==i.clip)?k?(s.push(k),\"mobile\"===k&&(I.value=b.value.replace(/\\d/g,\"x\")),r.push(I),\"cardNumber\"==k||\"exp_month\"==k||\"exp_year\"==k||\"exp_date\"==k?u.push(k):l.push(k)):o.push(I):c=1}else{I={id:b.id,type:b.type,placeholder:b.placeholder,name:b.name,aria_label:b[\"aria-label\"]?b[\"aria-label\"]:\"null\",aria_labelledby:b[\"aria-labelledby\"]?b[\"aria-labelledby\"]:\"null\",aria_description:b.aria_description?b.aria_description:\"null\"};a.push(I)}}return y&&(_=\"label\"),{autofill_scope_fields:r,out_scope_input_fields:o,out_scope_form_input_fields:a,autofill_fields:s,paymentinfo_fileds:u,contactinfo_fileds:l,is_have_hiden:c,recognition_attribute_status:w(d,f),recognition_regtags_status:w(p,h),recognition_type:_}}function w(t,e){return t&&e?3:!t&&e?2:t&&!e?1:0}function S(t,e){try{var n=void 0;t instanceof HTMLInputElement&&(n=(Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,\"value\")||{}).set),n?n.call(t,e):t.value=e}catch(t){throw t}}function k(t,e){return Object.values(e).some((function(e){return e.includes(t)}))}function I(t,e,n,i,r){void 0===i&&(i=!1),void 0===r&&(r={});var o=t.querySelectorAll(\"input\");i&&(o=t.querySelectorAll(\"input,select\"));for(var a=r,s=0;s<o.length;s++){var l=o[s];if(L(l,i)){var u=T(l);if(null!=u&&n.includes(u))(null===l.value||\"\"===l.value||l.value.match(/^[ ]*$/)||e)&&(a[u]?a[u].push(l):a[u]=[l])}}return a}function P(t,e,n,i){void 0===i&&(i={});var r=i;if(L(t)){var o=T(t);if(null!=o&&n.includes(o))!(null===t.value||\"\"===t.value||t.value.match(/^[ ]*$/))&&e||(r[o]?r[o].push(t):r[o]=[t])}return r}function T(t){if(!t||!x(t))return null;var e=F(t),n=M(t),i=function(t){for(var e in f){if(N(t,f[e]))return e;if(C(t,p[e]).is_match)return e}return null}(t),r=J(t).key;return e||i||n||r}function E(t){if(!t||!x(t))return null;var e=F(t),n=M(t),i=O(t),r=i.key,o=J(t),a=o.key,s=e||r||n||a,l=null;return!s||!a||e||r||n||(l=o.recognition_type),{key:s,is_new_attribute:i.is_new_attribute,is_new_regtags:i.is_new_regtags,recognition_type:l}}function A(t,e){for(var n=[],i=[],r=[],o=[],a=[],s=!1,l=!1,c=!1,d=0,f=0,p=\"\",h=[],_=[],y=0;y<t.length;y++){var m=t[y],g=b(m,e),v=g.autofill_scope_fields,w=g.out_scope_input_fields,S=g.contactinfo_fileds,k=g.paymentinfo_fileds,I=g.out_scope_form_input_fields,P=g.recognition_attribute_status,T=g.recognition_regtags_status,E=g.autofill_fields,A=(g.is_have_hiden,g.recognition_type);S.find((function(t){return u.ins.autoFillField.find((function(e){return e===t}))}))&&0==u.ins.contactInfo_status&&(l=!0),k.length>0&&0==u.ins.paymentInfo_status&&(c=!0),s=l||c;var F=m.querySelectorAll(\"input\");_=_.concat(Array.from(F)),n=n.concat(v),i=i.concat(w),r=r.concat(S),o=o.concat(k),a=a.concat(I),h=h.concat(E),0==d?d=P:P!=d&&(d=3),0==f?f=T:T!=f&&(f=3),p=A}return{all_autofill_scope:n,all_out_scope_autofill:i,contactinfo_scope_fileds:r,paymentinfo_scope_fileds:o,out_scope_form_fields:a,support_autofill:s,support_contact:l,support_payment:c,recognition_attribute_status_:d,recognition_regtags_status_:f,autofill_fields_list:h,all_input_fields:_,have_hiden:0,recognition_type_:p}}function F(t){var e,n,r=t.getAttribute(\"autocomplete\");if(r&&\"none\"!==r&&\"false\"!==r&&\"off\"!==r){var o=r.split(/\\s+/);if(o)try{for(var a=i(o),s=a.next();!s.done;s=a.next()){var l=s.value;for(var u in d)if(d[u].includes(l))return u}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}return null}function M(t){return\"email\"===t.getAttribute(\"type\")?\"email\":null}function O(t){var e={key:null,is_new_regtags:!1,is_new_attribute:!1};for(var n in f){var i=C(t,f[n]);if(i.is_match)return e.is_new_attribute=i.is_new_attribute,e.is_new_regtags=!1,e.key=n,e;if(C(t,p[n]).is_match)return e.is_new_attribute=i.is_new_attribute,e.is_new_regtags=!0,e.key=n,e}return e}function N(t,e){for(var n=[\"name\",\"placeholder\",\"id\",\"aria-label\",\"aria-labelledby\",\"aria_description\"],i=0;i<n.length;++i){var r=n[i],o=t.getAttribute(r);if(o&&o.match(e))return!0}return!1}function C(t,e){for(var n=[\"name\",\"placeholder\",\"id\",\"aria-label\",\"aria-labelledby\",\"aria_description\"],i={is_new_attribute:!1,is_match:!1},r=0;r<n.length;++r){var o=n[r],a=t.getAttribute(o);if(a&&a.match(e))return i.is_match=!0,i.is_new_attribute=\"name\"!=o&&\"placeholder\"!=o&&\"id\"!=o,i}return i}function L(t,e){return void 0===e&&(e=!1),e?t instanceof HTMLInputElement||t instanceof HTMLSelectElement:t instanceof HTMLInputElement}function x(t){return!(!R(t)||!function(t){return t.tabIndex>=0}(t))&&j(t)}function j(t){var e=t.type||t.getAttribute(\"type\");return!(e&&![\"text\",\"email\",\"tel\"].includes(e))}function R(t){return null!==t.offsetParent}function B(t){return/^\\d*$/.test(t)}function J(t){var e,n,i={key:null,recognition_type:\"\"},r=t.closest(\"label\");if(r&&r.textContent&&(l=z(s=r.textContent.trim())))return i.key=l,i.recognition_type=\"label\",i;var o=t.previousElementSibling;if(o&&\"label\"===o.tagName.toLowerCase()&&((s=null===(e=o.textContent)||void 0===e?void 0:e.trim())&&(l=z(s))))return i.key=l,i.recognition_type=\"label\",i;var a=t.nextElementSibling;if(a&&\"label\"===a.tagName.toLowerCase()&&((s=null===(n=a.textContent)||void 0===n?void 0:n.trim())&&(l=z(s))))return i.key=l,i.recognition_type=\"label\",i;if(t.id){var s,l,u=(t.closest(\"form\")||document).querySelector(\'label[for=\"\'.concat(t.id,\'\"]\'));if(u&&u.textContent)if(l=z(s=u.textContent.trim()))return i.key=l,i.recognition_type=\"label\",i}return i}function z(t){for(var e in h)if(t.match(h[e]))return e;for(var e in f)if(t.match(f[e]))return e;return null}function D(t){var e=[];for(var n in t)e.includes(n)||e.push(n);return e}var U,H,V=function(){function t(){}return t.normalize=function(t){try{var e=new URL(t),n=e.pathname;return n.length>1&&n.endsWith(\"/\")&&(n=n.replace(/\\/+$/,\"\")),\"\".concat(e.protocol,\"//\").concat(e.host).concat(n)}catch(e){return t}},t.generateUrlPrefixes=function(t){try{for(var e=new URL(t),n=\"\".concat(e.protocol,\"//\").concat(e.host),i=e.pathname.split(\"/\").filter(Boolean),r=[n],o=0;o<i.length;o++){var a=i.slice(0,o+1).join(\"/\");r.push(\"\".concat(n,\"/\").concat(a))}return r}catch(e){return[this.normalize(t)]}},t.getPathSegments=function(t){try{var e=this.normalize(t);return new URL(e).pathname.split(\"/\").filter(Boolean)}catch(t){return[]}},t.commonPrefixLen=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n&&t[i]===e[i];i++);return i},t.matchRule=function(t,e){var n,r,o,a;if(console.log(\">>> \u00e5\u00bc\u20ac\u00e5\u00a7\u2039\u00e8\u00bf\u203a\u00e8\u00a1\u0152 url \u00e5\u0152\u00b9\u00e9\u2026\u008d\u00ef\u00bc\u0152\u00e5\u00bd\u201c\u00e5\u2030\u008d url\",t),!e||0===e.length)return null;var s=new Map;try{for(var l=i(e),u=l.next();!u.done;u=l.next()){if(null==(v=u.value)?void 0:v.short_url){var c=this.normalize(v.short_url),d=s.get(c);d?d.push(v):s.set(c,[v])}}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}var f=this.normalize(t),p=this.getPathSegments(f),h=\"\";try{h=new URL(f).origin}catch(t){}var _=s.get(f);if(_&&_.length>0)return _[0];var y=[];try{for(var m=i(e),g=m.next();!g.done;g=m.next()){var v;if(null==(v=g.value)?void 0:v.short_url){var b=this.normalize(v.short_url);try{if(new URL(b).origin!==h)continue;var w=this.getPathSegments(b);if(w.length!==p.length)continue;var S=this.commonPrefixLen(w,p);S>0&&y.push({rule:v,common:S})}catch(t){}}}}catch(t){o={error:t}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}return y.length>0?(y.sort((function(t,e){return e.common-t.common})),console.log(\">>> \u00e5\u0152\u00b9\u00e9\u2026\u008d\u00e5\u02c6\u00b0\u00e7\u0161\u201e url\",y[0].rule.short_url),y[0].rule):null},t}(),K=function(){function o(){this.rules=[],this.initialized=!1,this.currentRule=null,this.preRecognizedElements={},this.isPreRecognitionComplete=!1}return o.prototype.initializeForCurrentPage=function(){return e(this,void 0,Promise,(function(){var t,e,i;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=window.location.href,e=this,[4,this.getRuleByUrl(t)];case 1:return e.currentRule=n.sent(),this.currentRule?console.log(\"AI recognition rule found for current page:\",this.currentRule):console.log(\"No AI recognition rule found for current page\"),[3,3];case 2:return i=n.sent(),console.error(\"Failed to initialize AI recognition for current page:\",i),[3,3];case 3:return[2]}}))}))},o.prototype.getRuleByUrl=function(t){return e(this,void 0,Promise,(function(){return n(this,(function(e){return[2,V.matchRule(t,this.rules)||null]}))}))},o.prototype.processCurrentPage=function(t){return e(this,void 0,Promise,(function(){var e,i=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.rules=Array.isArray(t)?t:[],this.initialized=!0,[4,this.initializeForCurrentPage()];case 1:return n.sent(),setTimeout((function(){i.performBatchRecognition()}),100),[3,3];case 2:return e=n.sent(),console.error(\"processCurrentPage failed:\",e),[3,3];case 3:return[2]}}))}))},o.prototype.getElementByFieldName=function(t,e){var n,i=e||this.currentRule||void 0;if(!i)return null;var r=(\"string\"==typeof i.structure?JSON.parse(i.structure):{}).form[t]||{};if(!r)return null;try{var o;if(r.selector_rule)if(o=document.querySelector(r.selector_rule))return o;if(r.id)if(o=document.getElementById(r.id))return o;try{var a={url:String((null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.href)||\"\"),field_name:String(t||\"\"),select_rule:String(r.selector_rule||\"\"),id:String(r.id||\"\"),rule_url:String((null==i?void 0:i.url)||(null==i?void 0:i.short_url)||\"\")},s=window.__LP_SEND_EVENT_V3;\"\"===r.id&&\"\"===r.selector_rule||null==s||s(\"lp_find_element_error\",a,!1)}catch(t){console.warn(\"[AIFormManager] report lp_find_element_error failed:\",t)}return null}catch(e){return console.error(\"Error finding element for field \".concat(t,\":\"),e),null}},o.prototype.getAllMatchingElements=function(t){var e=t||this.currentRule||void 0;if(!e)return{};var n=\"string\"==typeof e.structure?JSON.parse(e.structure):{},i={};for(var r in n.form){var o=this.getElementByFieldName(r,e);o&&(i[r]=o)}return i},o.prototype.getAITagFromInput=function(t){if(!this.currentRule)return null;var e=\"string\"==typeof this.currentRule.structure?JSON.parse(this.currentRule.structure):{};for(var n in e.form){var i=e.form[n];if(i&&this.isElementMatchingRule(t,i))return n}return null},o.prototype.isElementMatchingRule=function(t,e){try{return!(!e.id||t.id!==e.id)||!!e.selector_rule&&t.matches(e.selector_rule)}catch(t){return console.error(\"Error matching element with rule:\",t),!1}},o.prototype.performBatchRecognition=function(){return e(this,void 0,Promise,(function(){var e;return n(this,(function(n){if(!this.initialized||!this.currentRule)return console.log(\"AI recognition not initialized or no matching rule found\"),[2];try{this.preRecognizedElements={},e=this.getAllMatchingElements(this.currentRule||void 0),this.preRecognizedElements=t({},e),this.isPreRecognitionComplete=!0,console.log(\"Batch AI recognition completed, found elements:\",Object.keys(this.preRecognizedElements))}catch(t){console.error(\"Batch AI recognition failed:\",t),this.isPreRecognitionComplete=!1}return[2]}))}))},o.prototype.getAITagFromInputOptimized=function(t){var e,n;if(!this.isPreRecognitionComplete)return this.getAITagFromInput(t);try{for(var o=i(Object.entries(this.preRecognizedElements)),a=o.next();!a.done;a=o.next()){var s=r(a.value,2),l=s[0];if(s[1]===t)return l}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return null},o.prototype.setExternalStructure=function(t){var e=this;try{var n=\"string\"==typeof t?t:JSON.stringify(t||{});try{var i=\"string\"==typeof t?JSON.parse(t):t||{};console.log(\"[AIFormManager][\".concat(window===window.top?\"MAIN\":\"IFRAME\",\"] setExternalStructure\"),{url:window.location.href,keys:Object.keys((null==i?void 0:i.form)||{})})}catch(t){console.warn(\"[AIFormManager] setExternalStructure: structure parse warning\")}this.currentRule={structure:n,short_url:window.location.href},this.initialized=!0,setTimeout((function(){console.log(\"[AIFormManager] performBatchRecognition(triggered by setExternalStructure)\"),e.performBatchRecognition()}),50)}catch(t){console.error(\"setExternalStructure failed:\",t)}},o.prototype.getCurrentStructure=function(){if(!this.currentRule)return console.log(\"[AIFormManager] getCurrentStructure: no currentRule\"),null;try{return console.log(\"[AIFormManager] getCurrentStructure: returning structure\"),\"string\"==typeof this.currentRule.structure?JSON.parse(this.currentRule.structure):this.currentRule.structure||null}catch(t){return console.error(\"getCurrentStructure parse error:\",t),null}},o}();!function(t){t.Unknown=\"unknown\",t.LoginEnter=\"login_enter\",t.LoginStart=\"login_start\",t.LoginInput=\"login_input\",t.LoginSubmit=\"login_submit\",t.AddToCart=\"add_to_cart\",t.Checkout=\"checkout\",t.PaymentStart=\"payment_start\",t.PaymentInputClick=\"payment_input_click\",t.PaymentManualInput=\"payment_manual_input\",t.PaymentAutofillInput=\"payment_autofill_input\",t.PaymentSubmit=\"payment_submit\"}(U||(U={})),function(t){t.Unknown=\"unknown\",t.FirstParty=\"first_party\",t.ThirdParty=\"third_party\"}(H||(H={}));var G,$,q,W=[\"email\",\"password\",\"account\",\"phone\"];!function(t){t.google=\"google\",t.facebook=\"facebook\",t.apple=\"apple\",t.amazon=\"amazon\",t.x=\"x\",t.tiktok=\"tiktok\"}(G||(G={})),function(t){t.google=\"google\",t.shopPay=\"shopPay\",t.paypal=\"paypal\"}($||($={}));var Q=function(t){var e,n,i=U.Unknown,r=H.Unknown;if((null==t?void 0:t.login_id)&&(null===(e=null==t?void 0:t.login_id)||void 0===e?void 0:e.length)>0&&(null==t?void 0:t.login_type)){switch(null==t?void 0:t.login_type){case\"first_party\":r=H.FirstParty,i=U.LoginInput;break;case\"third_party\":r=H.ThirdParty,i=U.LoginStart;break;default:r=H.Unknown}return{currentProcess:i,currentParty:r,currentMethod:null==t?void 0:t.login_method}}if((null==t?void 0:t.payment_id)&&(null===(n=null==t?void 0:t.payment_id)||void 0===n?void 0:n.length)>0&&(null==t?void 0:t.payment_type)){switch(null==t?void 0:t.payment_type){case\"first_party\":r=H.FirstParty;break;case\"third_party\":r=H.ThirdParty;break;default:r=H.Unknown}return{currentProcess:U.PaymentStart,currentParty:r,currentMethod:null==t?void 0:t.payment_method}}return{currentProcess:i,currentParty:r,currentMethod:void 0}},Y=[U.LoginStart,U.LoginInput,U.LoginSubmit,U.PaymentStart,U.PaymentInputClick,U.PaymentManualInput,U.PaymentAutofillInput,U.PaymentSubmit],X=((q={})[U.Unknown]={aiRuleKey:null,isClientNeeded:!1,traditionalFunc:void 0},q[U.LoginEnter]={aiRuleKey:[\"account_info\",\"account_buttons\"],isClientNeeded:!1,traditionalFunc:void 0},q[U.LoginStart]={aiRuleKey:[\"login_info\",\"login_buttons\"],traditionalFunc:void 0,isClientNeeded:!0},q[U.LoginInput]={aiRuleKey:null,isClientNeeded:!0,traditionalFunc:void 0,getParty:function(t){return(null==t?void 0:t.login_method)&&W.includes(null==t?void 0:t.login_method),{event:U.LoginInput}}},q[U.LoginSubmit]={aiRuleKey:[\"login_submit\"],traditionalFunc:void 0,isClientNeeded:!0,getParty:function(t){return(null==t?void 0:t.login_method)&&W.includes(null==t?void 0:t.login_method),{event:U.LoginSubmit}}},q[U.AddToCart]={aiRuleKey:[\"product\",\"add_cart_info\"],isClientNeeded:!1,traditionalFunc:void 0},q[U.Checkout]={aiRuleKey:[\"checkout\"],isClientNeeded:!1,traditionalFunc:void 0},q[U.PaymentStart]={aiRuleKey:[\"pay_method_info\",\"pay_buttons\"],isClientNeeded:!0,getParty:function(t){return(null==t?void 0:t.payment_method)&&W.includes(null==t?void 0:t.payment_method)?{event:U.PaymentStart,params:{type:H.FirstParty,method:\"credit_card\"}}:{event:U.PaymentStart,params:{type:H.ThirdParty,method:null==t?void 0:t.login_method}}},traditionalFunc:void 0},q[U.PaymentInputClick]={aiRuleKey:void 0,isClientNeeded:!0},q[U.PaymentSubmit]={aiRuleKey:null,isClientNeeded:!0,traditionalFunc:void 0},q[U.PaymentManualInput]={aiRuleKey:void 0,isClientNeeded:!0,getParty:void 0},q[U.PaymentAutofillInput]={aiRuleKey:void 0,isClientNeeded:!0,getParty:void 0},q),Z=function(){function t(){}return t.normalize=function(t){try{var e=new URL(t),n=e.pathname;return n.length>1&&n.endsWith(\"/\")&&(n=n.replace(/\\/+$/,\"\")),\"\".concat(e.protocol,\"//\").concat(e.host).concat(n)}catch(e){return t}},t.generateUrlPrefixes=function(t){try{for(var e=new URL(t),n=\"\".concat(e.protocol,\"//\").concat(e.host),i=e.pathname.split(\"/\").filter(Boolean),r=[n],o=0;o<i.length;o++){var a=i.slice(0,o+1).join(\"/\");r.push(\"\".concat(n,\"/\").concat(a))}return r}catch(e){return[this.normalize(t)]}},t.getPathSegments=function(t){try{var e=this.normalize(t);return new URL(e).pathname.split(\"/\").filter(Boolean)}catch(t){return[]}},t.commonPrefixLen=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n&&t[i]===e[i];i++);return i},t.matchRule=function(t,e){var n,r,o,a;if(console.log(\">>> \u00e5\u00bc\u20ac\u00e5\u00a7\u2039\u00e8\u00bf\u203a\u00e8\u00a1\u0152 url \u00e5\u0152\u00b9\u00e9\u2026\u008d\u00ef\u00bc\u0152\u00e5\u00bd\u201c\u00e5\u2030\u008d url\",t),!e||0===e.length)return null;var s=new Map;try{for(var l=i(e),u=l.next();!u.done;u=l.next()){if(null==(v=u.value)?void 0:v.short_url){var c=this.normalize(v.short_url),d=s.get(c);d?d.push(v):s.set(c,[v])}}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}var f=this.normalize(t),p=this.getPathSegments(f),h=\"\";try{h=new URL(f).origin}catch(t){}var _=s.get(f);if(_&&_.length>0)return _[0];var y=[];try{for(var m=i(e),g=m.next();!g.done;g=m.next()){var v;if(null==(v=g.value)?void 0:v.short_url){var b=this.normalize(v.short_url);try{if(new URL(b).origin!==h)continue;var w=this.getPathSegments(b);if(w.length!==p.length)continue;var S=this.commonPrefixLen(w,p);S>0&&y.push({rule:v,common:S})}catch(t){}}}}catch(t){o={error:t}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}return y.length>0?(y.sort((function(t,e){return e.common-t.common})),console.log(\">>> \u00e5\u0152\u00b9\u00e9\u2026\u008d\u00e5\u02c6\u00b0\u00e7\u0161\u201e url\",y[0].rule.short_url),y[0].rule):null},t}(),tt=\"object\"==typeof global&&global&&global.Object===Object&&global,et=\"object\"==typeof self&&self&&self.Object===Object&&self,nt=tt||et||Function(\"return this\")(),it=nt.Symbol,rt=Object.prototype,ot=rt.hasOwnProperty,at=rt.toString,st=it?it.toStringTag:void 0;var lt=Object.prototype.toString;var ut=it?it.toStringTag:void 0;function ct(t){return null==t?void 0===t?\"[object Undefined]\":\"[object Null]\":ut&&ut in Object(t)?function(t){var e=ot.call(t,st),n=t[st];try{t[st]=void 0;var i=!0}catch(t){}var r=at.call(t);return i&&(e?t[st]=n:delete t[st]),r}(t):function(t){return lt.call(t)}(t)}function dt(t){return null!=t&&\"object\"==typeof t}function ft(t){return\"symbol\"==typeof t||dt(t)&&\"[object Symbol]\"==ct(t)}var pt=Array.isArray,ht=it?it.prototype:void 0,_t=ht?ht.toString:void 0;function yt(t){if(\"string\"==typeof t)return t;if(pt(t))return function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}(t,yt)+\"\";if(ft(t))return _t?_t.call(t):\"\";var e=t+\"\";return\"0\"==e&&1/t==-1/0?\"-0\":e}var mt=/\\s/;var gt=/^\\s+/;function vt(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&mt.test(t.charAt(e)););return e}(t)+1).replace(gt,\"\"):t}function bt(t){var e=typeof t;return null!=t&&(\"object\"==e||\"function\"==e)}var wt=/^[-+]0x[0-9a-f]+$/i,St=/^0b[01]+$/i,kt=/^0o[0-7]+$/i,It=parseInt;function Pt(t){if(\"number\"==typeof t)return t;if(ft(t))return NaN;if(bt(t)){var e=\"function\"==typeof t.valueOf?t.valueOf():t;t=bt(e)?e+\"\":e}if(\"string\"!=typeof t)return 0===t?t:+t;t=vt(t);var n=St.test(t);return n||kt.test(t)?It(t.slice(2),n?2:8):wt.test(t)?NaN:+t}function Tt(t){return t}function Et(t){if(!bt(t))return!1;var e=ct(t);return\"[object Function]\"==e||\"[object GeneratorFunction]\"==e||\"[object AsyncFunction]\"==e||\"[object Proxy]\"==e}var At,Ft=nt[\"__core-js_shared__\"],Mt=(At=/[^.]+$/.exec(Ft&&Ft.keys&&Ft.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+At:\"\";var Ot=Function.prototype.toString;var Nt=/^\\[object .+?Constructor\\]$/,Ct=Function.prototype,Lt=Object.prototype,xt=Ct.toString,jt=Lt.hasOwnProperty,Rt=RegExp(\"^\"+xt.call(jt).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function Bt(t){return!(!bt(t)||(e=t,Mt&&Mt in e))&&(Et(t)?Rt:Nt).test(function(t){if(null!=t){try{return Ot.call(t)}catch(t){}try{return t+\"\"}catch(t){}}return\"\"}(t));var e}function Jt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Bt(n)?n:void 0}var zt=Object.create,Dt=function(){function t(){}return function(e){if(!bt(e))return{};if(zt)return zt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Ut(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Ht=Date.now;var Vt,Kt,Gt,$t=function(){try{var t=Jt(Object,\"defineProperty\");return t({},\"\",{}),t}catch(t){}}(),qt=(Vt=$t?function(t,e){return $t(t,\"toString\",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Tt,Kt=0,Gt=0,function(){var t=Ht(),e=16-(t-Gt);if(Gt=t,e>0){if(++Kt>=800)return arguments[0]}else Kt=0;return Vt.apply(void 0,arguments)}),Wt=/^(?:0|[1-9]\\d*)$/;function Qt(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&(\"number\"==n||\"symbol\"!=n&&Wt.test(t))&&t>-1&&t%1==0&&t<e}function Yt(t,e,n){\"__proto__\"==e&&$t?$t(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Xt(t,e){return t===e||t!=t&&e!=e}var Zt=Object.prototype.hasOwnProperty;function te(t,e,n){var i=t[e];Zt.call(t,e)&&Xt(i,n)&&(void 0!==n||e in t)||Yt(t,e,n)}var ee=Math.max;function ne(t,e){return qt(function(t,e,n){return e=ee(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=ee(i.length-e,0),a=Array(o);++r<o;)a[r]=i[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=i[r];return s[e]=n(a),Ut(t,this,s)}}(t,e,Tt),t+\"\")}function ie(t){return\"number\"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function re(t){return null!=t&&ie(t.length)&&!Et(t)}var oe=Object.prototype;function ae(t){var e=t&&t.constructor;return t===(\"function\"==typeof e&&e.prototype||oe)}function se(t){return dt(t)&&\"[object Arguments]\"==ct(t)}var le=Object.prototype,ue=le.hasOwnProperty,ce=le.propertyIsEnumerable,de=se(function(){return arguments}())?se:function(t){return dt(t)&&ue.call(t,\"callee\")&&!ce.call(t,\"callee\")};var fe=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,pe=fe&&\"object\"==typeof module&&module&&!module.nodeType&&module,he=pe&&pe.exports===fe?nt.Buffer:void 0,_e=(he?he.isBuffer:void 0)||function(){return!1},ye={};ye[\"[object Float32Array]\"]=ye[\"[object Float64Array]\"]=ye[\"[object Int8Array]\"]=ye[\"[object Int16Array]\"]=ye[\"[object Int32Array]\"]=ye[\"[object Uint8Array]\"]=ye[\"[object Uint8ClampedArray]\"]=ye[\"[object Uint16Array]\"]=ye[\"[object Uint32Array]\"]=!0,ye[\"[object Arguments]\"]=ye[\"[object Array]\"]=ye[\"[object ArrayBuffer]\"]=ye[\"[object Boolean]\"]=ye[\"[object DataView]\"]=ye[\"[object Date]\"]=ye[\"[object Error]\"]=ye[\"[object Function]\"]=ye[\"[object Map]\"]=ye[\"[object Number]\"]=ye[\"[object Object]\"]=ye[\"[object RegExp]\"]=ye[\"[object Set]\"]=ye[\"[object String]\"]=ye[\"[object WeakMap]\"]=!1;var me=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,ge=me&&\"object\"==typeof module&&module&&!module.nodeType&&module,ve=ge&&ge.exports===me&&tt.process,be=function(){try{var t=ge&&ge.require&&ge.require(\"util\").types;return t||ve&&ve.binding&&ve.binding(\"util\")}catch(t){}}(),we=be&&be.isTypedArray,Se=we?function(t){return function(e){return t(e)}}(we):function(t){return dt(t)&&ie(t.length)&&!!ye[ct(t)]},ke=Object.prototype.hasOwnProperty;function Ie(t,e){var n=pt(t),i=!n&&de(t),r=!n&&!i&&_e(t),o=!n&&!i&&!r&&Se(t),a=n||i||r||o,s=a?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=s.length;for(var u in t)!e&&!ke.call(t,u)||a&&(\"length\"==u||r&&(\"offset\"==u||\"parent\"==u)||o&&(\"buffer\"==u||\"byteLength\"==u||\"byteOffset\"==u)||Qt(u,l))||s.push(u);return s}var Pe=Object.prototype.hasOwnProperty;function Te(t){if(!bt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=ae(t),n=[];for(var i in t)(\"constructor\"!=i||!e&&Pe.call(t,i))&&n.push(i);return n}function Ee(t){return re(t)?Ie(t,!0):Te(t)}var Ae=/\\.|\\[(?:[^[\\]]*|([\"\'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,Fe=/^\\w*$/;var Me=Jt(Object,\"create\");var Oe=Object.prototype.hasOwnProperty;var Ne=Object.prototype.hasOwnProperty;function Ce(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Le(t,e){for(var n=t.length;n--;)if(Xt(t[n][0],e))return n;return-1}Ce.prototype.clear=function(){this.__data__=Me?Me(null):{},this.size=0},Ce.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ce.prototype.get=function(t){var e=this.__data__;if(Me){var n=e[t];return\"__lodash_hash_undefined__\"===n?void 0:n}return Oe.call(e,t)?e[t]:void 0},Ce.prototype.has=function(t){var e=this.__data__;return Me?void 0!==e[t]:Ne.call(e,t)},Ce.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Me&&void 0===e?\"__lodash_hash_undefined__\":e,this};var xe=Array.prototype.splice;function je(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}je.prototype.clear=function(){this.__data__=[],this.size=0},je.prototype.delete=function(t){var e=this.__data__,n=Le(e,t);return!(n<0)&&(n==e.length-1?e.pop():xe.call(e,n,1),--this.size,!0)},je.prototype.get=function(t){var e=this.__data__,n=Le(e,t);return n<0?void 0:e[n][1]},je.prototype.has=function(t){return Le(this.__data__,t)>-1},je.prototype.set=function(t,e){var n=this.__data__,i=Le(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};var Re=Jt(nt,\"Map\");function Be(t,e){var n,i,r=t.__data__;return(\"string\"==(i=typeof(n=e))||\"number\"==i||\"symbol\"==i||\"boolean\"==i?\"__proto__\"!==n:null===n)?r[\"string\"==typeof e?\"string\":\"hash\"]:r.map}function Je(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Je.prototype.clear=function(){this.size=0,this.__data__={hash:new Ce,map:new(Re||je),string:new Ce}},Je.prototype.delete=function(t){var e=Be(this,t).delete(t);return this.size-=e?1:0,e},Je.prototype.get=function(t){return Be(this,t).get(t)},Je.prototype.has=function(t){return Be(this,t).has(t)},Je.prototype.set=function(t,e){var n=Be(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function ze(t,e){if(\"function\"!=typeof t||null!=e&&\"function\"!=typeof e)throw new TypeError(\"Expected a function\");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(ze.Cache||Je),n}ze.Cache=Je;var De=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,Ue=/\\\\(\\\\)?/g,He=function(t){var e=ze(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(\"\"),t.replace(De,(function(t,n,i,r){e.push(i?r.replace(Ue,\"$1\"):n||t)})),e}));function Ve(t,e){return pt(t)?t:function(t,e){if(pt(t))return!1;var n=typeof t;return!(\"number\"!=n&&\"symbol\"!=n&&\"boolean\"!=n&&null!=t&&!ft(t))||(Fe.test(t)||!Ae.test(t)||null!=e&&t in Object(e))}(t,e)?[t]:He(function(t){return null==t?\"\":yt(t)}(t))}function Ke(t){if(\"string\"==typeof t||ft(t))return t;var e=t+\"\";return\"0\"==e&&1/t==-1/0?\"-0\":e}function Ge(t,e,n){var i=null==t?void 0:function(t,e){for(var n=0,i=(e=Ve(e,t)).length;null!=t&&n<i;)t=t[Ke(e[n++])];return n&&n==i?t:void 0}(t,e);return void 0===i?n:i}var $e=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),qe=Function.prototype,We=Object.prototype,Qe=qe.toString,Ye=We.hasOwnProperty,Xe=Qe.call(Object);function Ze(t){var e=this.__data__=new je(t);this.size=e.size}Ze.prototype.clear=function(){this.__data__=new je,this.size=0},Ze.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ze.prototype.get=function(t){return this.__data__.get(t)},Ze.prototype.has=function(t){return this.__data__.has(t)},Ze.prototype.set=function(t,e){var n=this.__data__;if(n instanceof je){var i=n.__data__;if(!Re||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Je(i)}return n.set(t,e),this.size=n.size,this};var tn=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,en=tn&&\"object\"==typeof module&&module&&!module.nodeType&&module,nn=en&&en.exports===tn?nt.Buffer:void 0,rn=nn?nn.allocUnsafe:void 0;var on=nt.Uint8Array;function an(t,e){var n,i,r=e?(n=t.buffer,i=new n.constructor(n.byteLength),new on(i).set(new on(n)),i):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var sn,ln=function(t,e,n){for(var i=-1,r=Object(t),o=n(t),a=o.length;a--;){var s=o[sn?a:++i];if(!1===e(r[s],s,r))break}return t},un=function(){return nt.Date.now()},cn=Math.max,dn=Math.min;function fn(t,e,n){var i,r,o,a,s,l,u=0,c=!1,d=!1,f=!0;if(\"function\"!=typeof t)throw new TypeError(\"Expected a function\");function p(e){var n=i,o=r;return i=r=void 0,u=e,a=t.apply(o,n)}function h(t){return u=t,s=setTimeout(y,e),c?p(t):a}function _(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-u>=o}function y(){var t=un();if(_(t))return m(t);s=setTimeout(y,function(t){var n=e-(t-l);return d?dn(n,o-(t-u)):n}(t))}function m(t){return s=void 0,f&&i?p(t):(i=r=void 0,a)}function g(){var t=un(),n=_(t);if(i=arguments,r=this,l=t,n){if(void 0===s)return h(l);if(d)return clearTimeout(s),s=setTimeout(y,e),p(l)}return void 0===s&&(s=setTimeout(y,e)),a}return e=Pt(e)||0,bt(n)&&(c=!!n.leading,o=(d=\"maxWait\"in n)?cn(Pt(n.maxWait)||0,e):o,f=\"trailing\"in n?!!n.trailing:f),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},g.flush=function(){return void 0===s?a:m(un())},g}function pn(t,e,n){(void 0!==n&&!Xt(t[e],n)||void 0===n&&!(e in t))&&Yt(t,e,n)}function hn(t,e){if((\"constructor\"!==e||\"function\"!=typeof t[e])&&\"__proto__\"!=e)return t[e]}function _n(t){return function(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=i?i(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),r?Yt(n,s,l):te(n,s,l)}return n}(t,Ee(t))}function yn(t,e,n,i,r,o,a){var s=hn(t,n),l=hn(e,n),u=a.get(l);if(u)pn(t,n,u);else{var c,d=o?o(s,l,n+\"\",t,e,a):void 0,f=void 0===d;if(f){var p=pt(l),h=!p&&_e(l),_=!p&&!h&&Se(l);d=l,p||h||_?pt(s)?d=s:dt(c=s)&&re(c)?d=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(s):h?(f=!1,d=function(t,e){if(e)return t.slice();var n=t.length,i=rn?rn(n):new t.constructor(n);return t.copy(i),i}(l,!0)):_?(f=!1,d=an(l,!0)):d=[]:function(t){if(!dt(t)||\"[object Object]\"!=ct(t))return!1;var e=$e(t);if(null===e)return!0;var n=Ye.call(e,\"constructor\")&&e.constructor;return\"function\"==typeof n&&n instanceof n&&Qe.call(n)==Xe}(l)||de(l)?(d=s,de(s)?d=_n(s):bt(s)&&!Et(s)||(d=function(t){return\"function\"!=typeof t.constructor||ae(t)?{}:Dt($e(t))}(l))):f=!1}f&&(a.set(l,d),r(d,l,i,o,a),a.delete(l)),pn(t,n,d)}}function mn(t,e,n,i,r){t!==e&&ln(e,(function(o,a){if(r||(r=new Ze),bt(o))yn(t,e,a,n,mn,i,r);else{var s=i?i(hn(t,a),o,a+\"\",t,e,r):void 0;void 0===s&&(s=o),pn(t,a,s)}}),Ee)}var gn,vn=(gn=function(t,e,n,i){mn(t,e,n,i)},ne((function(t,e){var n=-1,i=e.length,r=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(r=gn.length>3&&\"function\"==typeof r?(i--,r):void 0,o&&function(t,e,n){if(!bt(n))return!1;var i=typeof e;return!!(\"number\"==i?re(n)&&Qt(e,n.length):\"string\"==i&&e in n)&&Xt(n[e],t)}(e[0],e[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var a=e[n];a&&gn(t,a,n,r)}return t})));function bn(t){if(t.id)return\'//*[@id=\"\'.concat(t.id,\'\"]\');for(var e=[];t&&t.nodeType===Node.ELEMENT_NODE;){for(var n=0,i=!1,r=t.previousSibling;r;)r.nodeType!==Node.DOCUMENT_TYPE_NODE&&r.nodeName===t.nodeName&&n++,r=r.previousSibling;for(r=t.nextSibling;r;){if(r.nodeName===t.nodeName){i=!0;break}r=r.nextSibling}var o=t.nodeName.toLowerCase(),a=n||i?\"[\".concat(n+1,\"]\"):\"\";if(e.push(o+a),\"BODY\"===t.nodeName||\"HTML\"===t.nodeName)break;t=t.parentNode}return\"//\"+e.reverse().join(\"/\")}function wn(t){var e=t.target,n=0,i=0;t instanceof MouseEvent&&(n=t.pageX,i=t.pageY);var r=\"\";return r=e instanceof HTMLInputElement?\"input\":e instanceof HTMLButtonElement?\"button\":e.tagName.toLowerCase(),{id:e.id||\"\",name:e.getAttribute(\"name\")||\"\",class:e.className||\"\",pageX:n,pageY:i,tag:r,path:bn(e),text:(e.textContent.trim()||\"\").slice(0,50),timestamp:Date.now(),url:window.location.href,pageTitle:document.title,is_in_iframe:window===window.top?0:1,event_type:t.type}}function Sn(t,e){var n=e.filter((function(t){return\"string\"==typeof t&&\"\"!==t.trim()}));return!(!(null==n?void 0:n.length)||0===n.length||0===t.length)&&n.some((function(e){return t.some((function(t){return e.includes(t)}))}))}var kn,In=function(t){for(var e,n,i,a,s,l,u,c=null===(a=null===(n=null===(e=(null==t?void 0:t.textContent)||\"\")||void 0===e?void 0:e.replace)||void 0===n?void 0:(i=n.call(e,/\\s+/g,\"\")).toLowerCase)||void 0===a?void 0:a.call(i),d=null===(l=null===(s=(null==t?void 0:t.className)||\"\")||void 0===s?void 0:s.toLowerCase)||void 0===l?void 0:l.call(s),f=[],p=t.attributes,h=0;h<p.length;h++){var _=p[h];if(![\"class\",\"style\"].includes(_.name)&&_.value&&(null===(u=_.value)||void 0===u?void 0:u.length)>0){var y=(_.value.toLocaleLowerCase()||\"\").replace(/\\s+/g,\"\");f.push(y)}}return{textAttr:o(o([],r(f),!1),[c],!1),classAttr:[d]}},Pn=function(t,e,n){void 0===n&&(n=!0);for(var i=n?t:null==t?void 0:t.parentElement;i&&i!==document.body;){var r=In(t),o=r.textAttr,a=r.classAttr;if(Sn(e.keywords,o)||Sn(e.class,a))return!0;i=null==i?void 0:i.parentElement}return!1},Tn=function(t,e){if(!t)return!1;for(var n=t.childNodes,i=0;i<n.length;i++){var r=n[i];if(r.nodeType===Node.ELEMENT_NODE&&Tn(r,e))return!0}var o=t.tagName.toLocaleLowerCase()||\"\",a=In(t),s=a.textAttr,l=a.classAttr;return!(![\"a\",\"img\",\"svg\"].includes(o)||!Sn(e.keywords,s)&&!Sn(e.class,l))||void 0},En={loginEnter:{keywords:[\"account\",\"signin\",\"login\",\"signup\"],class:[\"login\",\"signin\",\"signup\"]},onePartyLoginInputing:{keywords:[\"email\",\"account\",\"phone\",\"identifier\",\"id\",\"cc-\"],class:[\"email\",\"account\",\"phone\",\"identifier\",\"id\",\"cc-\"]},onePartyLoginSubmit:{keywords:[\"signin\",\"signup\",\"login\"],class:[\"signin\",\"signup\",\"login\"]},thirdPartyLoginStart:{basic:{keywords:[\"signinwith\",\"loginwith\",\"continuewith\",\"start\",\"siginin\",\"login\"],class:[\"signin\",\"signup\",\"login\"]},type:{google:{keywords:[\"google\"],class:[\"google\"]},amazon:{keywords:[\"amazon\"],class:[\"amazon\"]},facebook:{keywords:[\"facebook\"],class:[\"facebook\"]},apple:{keywords:[\"apple\"],class:[\"apple\"]},twitter:{keywords:[\"twitter\"],class:[\"twitter\"]},tiktok:{keywords:[\"tiktok\"],class:[\"tiktok\"]}}},thirdPartyLoginSubmit:{keywords:[\"login\",\"submit\",\"next\"],class:[\"login\",\"submit\",\"next\"]},payment:{keywords:[\"payment\",\"paynow\"],class:[\"payment\",\"btn-payment\",\"btn-pay\"]},shopping:{keywords:[\"addtocart\",\"addtobag\",\"addtobasket\",\"tobuy\"],class:[\"add-to-cart\",\"add-to-bag\",\"add-to-basket\"]},checkout:{keywords:[\"checkout\",\"buyitnow\",\"buynow\"],class:[\"checkout\",\"btn-checkout\",\"button-checkout\",\"checkout-pay-button\",\"buy-it-now\",\"buy-now\",\"but-btn\"]},thirdPaymentStart:{apple_pay:{keywords:[\"apple-pay\",\"apple_pay\",\"applepay\",\"apple\"],class:[\"apple-pay\",\"apple_pay\"]},google_pay:{keywords:[\"gpay\",\"google-pay\",\"google_pay\",\"googlepay\",\"g-pay\"],class:[\"gpay\",\"google-pay\",\"google_pay\",\"g-pay\"]},paypal:{keywords:[\"paypal\"],class:[\"paypal\"]},shop_pay:{keywords:[\"shoppay\",\"shop-pay\",\"shop_pay\"],class:[\"shop-pay\",\"shop_pay\"]},amazon_pay:{keywords:[\"amazonpay\",\"amazon-pay\",\"amazon_pay\"],class:[\"amazon-pay\",\"amazon_pay\"]},cash_app_pay:{keywords:[\"cashapppay\",\"cash_app_pay\",\"cash-app-pay\"],class:[\"cash_app_pay\",\"cash-app-pay\"]},afterpay:{keywords:[\"afterpay\"],class:[\"afterpay\"]},klarna:{keywords:[\"klarna\"],class:[\"klarna\"]},samsungpay:{keywords:[\"samsungpay\",\"samsung_pay\",\"samsung-pay\"],class:[\"samsungpay\",\"samsung-pay\"]},kakaopay:{keywords:[\"kakaopay\",\"kakao_pay\"],class:[\"kakao-pay\",\"kakaopay\"]},naverpay:{keywords:[\"naverpay\",\"naver_pay\"],class:[\"naver-pay\",\"naverpay\"]},blik:{keywords:[\"blik\"],class:[\"blik\"]},openpay:{keywords:[\"openpay\",\"open_pay\"],class:[\"openpay\",\"open_pay\"]},zippay:{keywords:[\"zippay\",\"zip_pay\"],class:[\"zippay\",\"zip-pay\"]},pix:{keywords:[\"pix\"],class:[\"pix\"]},mercadopago:{keywords:[\"mercadopago\",\"mercado-pago\",\"mercado_pago\"],class:[\"mercadopago\",\"mercado-pago\"]},dalaika:{keywords:[\"dalaika\"],class:[\"dalaika\"]},stcPay:{keywords:[\"stcpay\",\"stc-pay\",\"stc_pay\"],class:[\"stcpay\",\"stc-pay\"]},Tabby:{keywords:[\"tabby\"],class:[\"tabby\"]},Tamara:{keywords:[\"tamara\"],class:[\"tamara\"]},PayU:{keywords:[\"payu\",\"pay-u\",\"pay_u\"],class:[\"payu\",\"pay-u\",\"pay_u\"]},Przelewy24:{keywords:[\"przelewy24\"],class:[\"przelewy24\"]},GoPay:{keywords:[\"gopay\",\"go_pay\"],class:[\"gopay\",\"go_pay\"]},iDeal:{keywords:[\"ideal\"],class:[\"ideal\"]},Bancontact:{keywords:[\"bancontact\"],class:[\"bancontact\"]},Twint:{keywords:[\"twint\"],class:[\"twint\"]},giropay:{keywords:[\"giropay\",\"giro_pay\"],class:[\"giropay\",\"giro_pay\"]},AliPay:{keywords:[\"alipay\"],class:[\"alipay\"]},Bizum:{keywords:[\"bizum\"],class:[\"bizum\"]},Boleto:{keywords:[\"boleto\"],class:[\"boleto\"]},TossPay:{keywords:[\"tosspay\",\"toss-pay\"],class:[\"tosspay\",\"toss_pay\"]},dana:{keywords:[\"dana\"],class:[\"dana\"]}},thirdPartyPaymentSubmit:{paypal:(kn={},kn[\"data-id\"]=[\"payment-submit-btn\"],kn.text=[\"completepurchase\"],kn),googlePay:{id:[\"gpay-button-online-api-id\"],class:[\"gpay-button\"]},shopPay:{keywords:[\"shop_pay\"],text:[\"paynow\"]}},onePartyPaymentStart:{keywords:[\"cardholdername\",\"cardnumber\",\"expirationDate\",\"securityCode\",\"creditcard\",\"cc-\"],class:[\"creditcard\",\"data-card\",\"debitcard\"]},onePartyPaymentSubmit:{keywords:[\"submitorder\",\"payment\",\"placeorder\",\"purchase\",\"buynow\"],class:[\"submit-payment\"]}},An={keywords:[\"achetez-le maintenant\",\"ajouter au panier\",\"zum warenkorb hinzuf\u00c3\u00bcgen\",\"zur tasche hinzuf\u00c3\u00bcgen\",\"a\u00c3\u00b1adir\",\"a\u00c3\u00b1adir al carrito\",\"a\u00c3\u00b1adir a la cesta\",\"\u00d0\u201d\u00d0\u00be\u00d0\u00b1\u00d0\u00b0\u00d0\u00b2\u00d0\u00b8\u00d1\u201a\u00d1\u0152 \u00d0\u00b2 \u00d0\u00ba\u00d0\u00be\u00d1\u20ac\u00d0\u00b7\u00d0\u00b8\u00d0\u00bd\u00d1\u0192\",\"\u00d0\u201d\u00d0\u00be\u00d0\u00b1\u00d0\u00b0\u00d0\u00b2\u00d0\u00b8\u00d1\u201a\u00d1\u0152 \u00d0\u00b2 \u00d0\u00ba\u00d0\u00be\u00d1\u20ac\u00d0\u00b7\u00d0\u00b8\u00d0\u00bd\u00d1\u0192\",\"\u00d8\u00a3\u00d8\u00b6\u00d9\u0081 \u00d8\u00a5\u00d9\u201e\u00d9\u2030 \u00d8\u00b9\u00d8\u00b1\u00d8\u00a8\u00d8\u00a9 \u00d8\u00a7\u00d9\u201e\u00d8\u00aa\u00d8\u00b3\u00d9\u02c6\u00d9\u201a\",\"\u00eb\u00b0\u201d\u00eb\u00a1\u0153 \u00ea\u00b5\u00ac\u00eb\u00a7\u00a4\u00ed\u2022\u02dc\u00ea\u00b8\u00b0\",\"\u00ec\u017e\u00a5\u00eb\u00b0\u201d\u00ea\u00b5\u00ac\u00eb\u2039\u02c6\u00ec\u2014\u0090 \u00ec\u00b6\u201d\u00ea\u00b0\u20ac\u00ed\u2022\u02dc\u00ea\u00b8\u00b0\",\"\u00e5\u0160 \u00e5\u2026\u00a5\u00e8\u00b3\u00bc\u00e7\u2030\u00a9\u00e8\u00bb\u0160\",\"dodaj do koszyka\",\"p\u00c5\u2122idat do ko\u00c5\u00a1\u00c3\u00adku\",\"ad\u00c4\u0192uga\u00c8\u203ai \u00c3\u00aen co\u00c8\u2122\",\"adicionar ao carrinho\",\"\u00e3\u201a\u00ab\u00e3\u0192\u00bc\u00e3\u0192\u02c6\u00e3\u0081\u00ab\u00e8\u00bf\u00bd\u00e5\u0160 \",\"Aggiungi al carrello\",\"\u00e0\u00a4\u2022\u00e0\u00a4\u00be\u00e0\u00a4\u00b0\u00e0\u00a5\u008d\u00e0\u00a4\u0178 \u00e0\u00a4\u00ae\u00e0\u00a5\u2021\u00e0\u00a4\u201a \u00e0\u00a4\u0153\u00e0\u00a5\u2039\u00e0\u00a4\u00a1\u00e0\u00a4\u00bc\u00e0\u00a5\u2021\u00e0\u00a4\u201a\",\"cart mein jodhen\",\"tambahkan ke keranjang\",\"tambah ke keranjang\",\"th\u00c3\u00aam v\u00c3 o gi\u00e1\u00bb\u008f h\u00c3 ng\",\"adauga in cos\",\"toevoegen aan winkelwagen\",\"in den warenkorb legen\",\"legg til\"]},Fn={keywords:[\"commandez maintenant\",\"acheter maintenant\",\"sofort kaufen\",\"sofort bestellen\",\"zur kasse gehen\",\"bestellbest\u00c3\u00a4tigung\",\"confirmaci\u00c3\u00b3n del pedido\",\"finalizar compra\",\"\u00d0\u017e\u00d1\u201e\u00d0\u00be\u00d1\u20ac\u00d0\u00bc\u00d0\u00bb\u00d0\u00b5\u00d0\u00bd\u00d0\u00b8\u00d0\u00b5 \u00d0\u00b7\u00d0\u00b0\u00d0\u00ba\u00d0\u00b0\u00d0\u00b7\u00d0\u00b0\",\"\u00d0\u0178\u00d0\u00b5\u00d1\u20ac\u00d0\u00b5\u00d0\u00b9\u00d1\u201a\u00d0\u00b8 \u00d0\u00ba \u00d0\u00be\u00d0\u00bf\u00d0\u00bb\u00d0\u00b0\u00d1\u201a\u00d0\u00b5\",\"\u00d0\u0178\u00d0\u00be\u00d0\u00b4\u00d1\u201a\u00d0\u00b2\u00d0\u00b5\u00d1\u20ac\u00d0\u00b6\u00d0\u00b4\u00d0\u00b5\u00d0\u00bd\u00d0\u00b8\u00d0\u00b5 \u00d0\u00b7\u00d0\u00b0\u00d0\u00ba\u00d0\u00b0\u00d0\u00b7\u00d0\u00b0\",\"\u00d8\u00aa\u00d8\u00a3\u00d9\u0192\u00d9\u0160\u00d8\u00af \u00d8\u00a7\u00d9\u201e\u00d8\u00b7\u00d9\u201e\u00d8\u00a8\",\"\u00d8\u00a7\u00d9\u201e\u00d8\u00af\u00d9\u0081\u00d8\u00b9 \u00d8\u00b9\u00d9\u2020\u00d8\u00af \u00d8\u00a7\u00d9\u201e\u00d8\u00a5\u00d8\u00b3\u00d8\u00aa\u00d9\u201e\u00d8\u00a7\u00d9\u2026\",\"\u00d8\u00aa\u00d8\u00a3\u00d9\u0192\u00d9\u0160\u00d8\u00af \u00d9\u02c6\u00d8\u00aa\u00d9\u201a\u00d8\u00af\u00d9\u0160\u00d9\u2026 \u00d8\u00a7\u00d9\u201e\u00d8\u00b7\u00d9\u201e\u00d8\u00a8\",\"\u00ec\u00a3\u00bc\u00eb\u00ac\u00b8 \u00ec\u2122\u201e\u00eb\u00a3\u0152\",\"\u00ea\u00b5\u00ac\u00eb\u00a7\u00a4\u00ed\u2022\u02dc\u00ea\u00b8\u00b0\",\"\u00e7\u00b5\u0090\u00e5\u00b8\u00b3\",\"\u00e8\u00a8\u201a\u00e5\u2013\u00ae\u00e7\u00a2\u00ba\u00e8\u00aa\u008d\",\"\u00e4\u00bc\u0161\u00e8\u00a8\u02c6\u00e3\u0081\u00b8\u00e9\u20ac\u00b2\u00e3\u201a\u20ac\",\"z\u00c5\u201a\u00c3\u00b3\u00c5\u00bc zam\u00c3\u00b3wienie\",\"przejd\u00c5\u00ba do p\u00c5\u201aatno\u00c5\u203aci\",\"kup teraz\",\"potvr\u00c4\u008fte a ode\u00c5\u00a1lete objedn\u00c3\u00a1vku\",\"kupte si to hned\",\"dokon\u00c4\u008dit objedn\u00c3\u00a1vku\",\"finaliza\u00c8\u203ai comanda\",\"revizuie\u00c8\u2122te comanda\",\"finaliza\u00c8\u203ai plata\",\"comprar\",\"comprar agora\",\"\u00e3\u0192\u0081\u00e3\u201a\u00a7\u00e3\u0192\u0192\u00e3\u201a\u00af\u00e3\u201a\u00a2\u00e3\u201a\u00a6\u00e3\u0192\u02c6\",\"\u00e0\u00a4\u0161\u00e0\u00a5\u2021\u00e0\u00a4\u2022\u00e0\u00a4\u2020\u00e0\u00a4\u2030\u00e0\u00a4\u0178 \u00e0\u00a4\u2022\u00e0\u00a4\u00b0\u00e0\u00a4\u00a8\u00e0\u00a4\u00be\",\"checkout karna\",\"Ho\u00c3 n t\u00e1\u00ba\u00a5t \u00c4\u2018\u00c6\u00a1n h\u00c3 ng\",\"mijn bestelling afronden\",\"bestelling nakijken\",\"jetzt sicher zur kasse\",\"jetzt kaufen\"]};function Mn(t,e,n){var i,r;if(!(t instanceof HTMLInputElement)||\"keydown\"!==e)return!1;if(!t.value||!(null===(i=t.value)||void 0===i?void 0:i.length)||0===(null===(r=t.value)||void 0===r?void 0:r.length))return!1;var o=n.textAttr,a=n.classAttr;return Sn(En.onePartyLoginInputing.keywords,o)||Sn(En.onePartyLoginInputing.class,a)}function On(t,e){return new Promise((function(n){var i=t.target;i instanceof HTMLInputElement&&i.addEventListener(\"keydown\",fn((function(t){if(Mn(i,t.type,e)){var r=wn(t);n(r)}else n(!1)}),200))}))}function Nn(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s,l;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,e.target,a=o.currentParty,s=o.currentProcess,a===H.FirstParty&&s.startsWith(\"login\")?[4,On(e,r)]:[3,2];case 1:if(l=n.sent())return[2,{flag:!0,info:{eventInfo:t(t({},l),{buttonType:U.LoginInput,paymentType:\"one_party\"}),currentProcess:{currentProcess:U.LoginInput,currentParty:H.FirstParty}}}];n.label=2;case 2:return[2]}}))}))}function Cn(t,i){return e(this,void 0,void 0,(function(){return n(this,(function(t){return[2,new Promise((function(t){var e=i.textAttr,n=i.classAttr;t(Sn([\"submit\"],e)&&(Sn(En.onePartyLoginSubmit.keywords,e)||Sn(En.onePartyLoginSubmit.class,n)))}))]}))}))}function Ln(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s,l;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,e.target,a=o.currentParty,s=o.currentProcess,a===H.FirstParty&&s.startsWith(\"login\")?[4,Cn(0,r)]:[3,2];case 1:if(n.sent())return l=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},l),{buttonType:U.LoginSubmit,paymentType:\"one_party\"}),currentProcess:{currentProcess:U.LoginSubmit,currentParty:H.FirstParty}}}];n.label=2;case 2:return[2]}}))}))}function xn(t,i){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e){var n=i.textAttr,r=i.classAttr;t instanceof HTMLInputElement||e(!1),e(Sn(En.onePartyPaymentStart.keywords,n)||Sn(En.onePartyPaymentStart.class,r))}))]}))}))}function jn(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s,l,u;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,a=e.target,s=o.currentProcess,l=o.currentParty,s&&s.startsWith(\"login\")||l===H.FirstParty?[3,2]:[4,xn(a,r)];case 1:if(n.sent())return u=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},u),{buttonType:U.PaymentInputClick,paymentType:\"one_party\"}),currentProcess:{currentProcess:U.PaymentInputClick,currentParty:H.FirstParty,currentMethod:\"credit_card\"}}}];n.label=2;case 2:return[2]}}))}))}function Rn(t,e){return new Promise((function(n){var i=t.target;i instanceof HTMLInputElement&&i.addEventListener(\"keydown\",fn((function(t){if(function(t,e,n){var i,r;if(!(t instanceof HTMLInputElement)||\"keydown\"!==e)return!1;if(!t.value||!(null===(i=t.value)||void 0===i?void 0:i.length)||0===(null===(r=t.value)||void 0===r?void 0:r.length))return!1;var o=n.textAttr,a=n.classAttr;return Sn(En.onePartyPaymentStart.keywords,o)||Sn(En.onePartyPaymentStart.class,a)}(i,t.type,e)){var r=wn(t);n(r)}else n(!1)}),200))}))}function Bn(i){return e(this,void 0,void 0,(function(){var e,r,o,a;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,o.currentProcess.startsWith(\"payment\")?[4,Rn(e,r)]:[3,2];case 1:if(a=n.sent())return[2,{flag:!0,info:{eventInfo:t(t({},a),{buttonType:U.PaymentManualInput,paymentType:\"one_party\"}),currentProcess:{currentProcess:U.PaymentManualInput,currentParty:H.FirstParty}}}];n.label=2;case 2:return[2]}}))}))}function Jn(t,i){return e(this,void 0,void 0,(function(){return n(this,(function(t){return[2,new Promise((function(t){var e=i.textAttr,n=i.classAttr;t(Sn([\"submit\"],e)&&Sn(En.onePartyPaymentSubmit.keywords,e)||Sn(En.onePartyPaymentSubmit.class,n))}))]}))}))}function zn(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,e.target,a=o.currentParty,o.currentProcess.startsWith(\"payment\")&&a===H.FirstParty?[4,Jn(0,r)]:[3,2];case 1:if(n.sent())return s=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},s),{buttonType:\"payemt_submit\",paymentType:\"one_party\"}),currentProcess:{currentProcess:U.PaymentSubmit,currentParty:H.FirstParty}}}];n.label=2;case 2:return[2]}}))}))}function Dn(r,o){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e){var n,a,s,l={paymentType:\"\",isThirdParty:!1},u=Pn(r,En.loginEnter),c=o.textAttr,d=o.classAttr,f=Sn(En.thirdPartyLoginStart.basic.keywords,c)||Sn(En.thirdPartyLoginStart.basic.class,d),p=Tn(r,En.loginEnter);try{for(var h=i(Object.keys(En.thirdPartyLoginStart.type)),_=h.next();!_.done;_=h.next()){var y=_.value,m=En.thirdPartyLoginStart.type[y];if(Sn(m.keywords,c)||Sn(m.class,d)){l=t(t({},l),{paymentType:y});break}}}catch(t){n={error:t}}finally{try{_&&!_.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}e({paymentType:null==l?void 0:l.paymentType,isThirdParty:Boolean((null===(s=null==l?void 0:l.paymentType)||void 0===s?void 0:s.length)>0||f&&(u||p))})}))]}))}))}function Un(i){var r;return e(this,void 0,void 0,(function(){var e,o,a,s;return n(this,(function(n){switch(n.label){case 0:return e=i.event,o=i.targetDomInfo,[4,Dn(e.target,o)];case 1:return(a=n.sent()).isThirdParty&&(null==a?void 0:a.paymentType)&&(null===(r=null==a?void 0:a.paymentType)||void 0===r?void 0:r.length)>0?(s=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},s),{buttonType:U.LoginStart,paymentType:null==a?void 0:a.paymentType}),currentProcess:{currentProcess:U.LoginStart,currentParty:H.ThirdParty,currentMethod:null==a?void 0:a.paymentType}}}]):[2]}}))}))}function Hn(t,e){return new Promise((function(n){var i=t.target;i instanceof HTMLInputElement&&i.addEventListener(\"keydown\",fn((function(t){if(Mn(i,t.type,e)){var r=wn(t);n(r)}else n(!1)}),200))}))}function Vn(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s,l;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,a=o.currentParty,s=o.currentProcess,a===H.ThirdParty&&s.startsWith(\"login\")?[4,Hn(e,r)]:[3,2];case 1:if(n.sent())return l=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},l),{buttonType:U.LoginInput,paymentType:H.ThirdParty}),currentProcess:{currentProcess:U.LoginInput,currentParty:H.ThirdParty}}}];n.label=2;case 2:return[2]}}))}))}function Kn(t,i){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e){var n=i.textAttr,r=i.classAttr,o=Sn([\"submit\"],n),a=Pn(t,En.loginEnter);e(o&&(Sn(En.thirdPartyLoginSubmit.keywords,n)||Sn(En.thirdPartyLoginSubmit.class,r))&&a)}))]}))}))}function Gn(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s,l,u,c;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,a=e.target,s=o.currentParty,l=o.currentProcess,u=o.currentMethod,s===H.ThirdParty&&l.startsWith(\"login\")?[4,Kn(a,r)]:[3,2];case 1:if(n.sent())return c=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},c),{buttonType:U.LoginSubmit,paymentType:u}),currentProcess:{currentProcess:U.LoginSubmit,currentParty:H.ThirdParty}}}];n.label=2;case 2:return[2]}}))}))}function $n(t,a){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e){var n,s,l,u,c=a.textAttr,d=a.classAttr,f=null===(u=null===(l=(null==t?void 0:t.tagName)||\"\")||void 0===l?void 0:l.toLowerCase)||void 0===u?void 0:u.call(l),p=o(o([],r(d),!1),[f],!1),h={paymentType:\"\",isThirdParty:!1};try{for(var _=i(Object.keys(En.thirdPaymentStart)),y=_.next();!y.done;y=_.next()){var m=y.value,g=En.thirdPaymentStart[m];if(Sn(g.keywords,c)||Sn(g.class,p)){h={paymentType:m,isThirdParty:!0};break}}}catch(t){n={error:t}}finally{try{y&&!y.done&&(s=_.return)&&s.call(_)}finally{if(n)throw n.error}}e(h)}))]}))}))}function qn(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s,l;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,a=e.target,o.currentProcess,[4,$n(a,r)];case 1:return(s=n.sent())&&s.isThirdParty?(l=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},l),{buttonType:\"payment_start\",paymentType:s.paymentType}),currentProcess:{currentProcess:U.PaymentStart,currentParty:H.ThirdParty,currentMethod:s.paymentType}}}]):[2]}}))}))}function Wn(t){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e){var n,r,o={paymentType:\"\",isThirdParty:!1},a=function(e){var n=En.thirdPartyPaymentSubmit[e],i=!1;if(Object.keys(n).map((function(e){var r=t.getAttribute(e)||\"\";i=i&&Sn(n[e],[r])})),i)return o={paymentType:e,isThirdParty:!0},\"break\"};try{for(var s=i(Object.keys(En.thirdPartyPaymentSubmit)),l=s.next();!l.done;l=s.next()){if(\"break\"===a(l.value))break}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e(o)}))]}))}))}function Qn(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s,l;return n(this,(function(n){switch(n.label){case 0:return e=i.event,i.targetDomInfo,r=i.currentClientMsg,o=e.target,a=r.currentParty,r.currentProcess.startsWith(\"payment\")&&a===H.ThirdParty?[4,Wn(o)]:[3,2];case 1:if((s=n.sent())&&s.isThirdParty)return l=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},l),{buttonType:\"payment_submit\",paymentType:s.paymentType}),currentProcess:{currentProcess:U.PaymentSubmit,currentParty:H.ThirdParty,currentMethod:s.paymentType}}}];n.label=2;case 2:return[2]}}))}))}function Yn(t,i){return e(this,void 0,void 0,(function(){return n(this,(function(t){return[2,new Promise((function(t){var e=i.textAttr,n=i.classAttr;t(Sn(En.shopping.keywords,e)||Sn(En.shopping.class,n)||Sn(An.keywords,e))}))]}))}))}function Xn(i){return e(this,void 0,void 0,(function(){var e,r,o,a;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,e.target,Sn([\"login\",\"payment\"],[o.currentProcess])?[3,2]:[4,Yn(0,r)];case 1:if(n.sent())return a=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},a),{buttonType:\"add to cart\"}),currentProcess:{currentProcess:U.AddToCart}}}];n.label=2;case 2:return[2]}}))}))}function Zn(t,i){return e(this,void 0,void 0,(function(){return n(this,(function(t){return[2,new Promise((function(t){var e=i.textAttr,n=i.classAttr;t(Sn(En.checkout.keywords,e)||Sn(En.checkout.class,n)||Sn(Fn.keywords,e))}))]}))}))}function ti(i){return e(this,void 0,void 0,(function(){var e,r,o,a;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,e.target,Sn([\"login\",\"payment\"],[o.currentProcess])?[3,2]:[4,Zn(0,r)];case 1:if(n.sent())return a=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},a),{buttonType:\"checkout\"}),currentProcess:{currentProcess:U.Checkout}}}];n.label=2;case 2:return[2]}}))}))}function ei(t,i){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e){t instanceof HTMLInputElement&&e(!1);var n=i.textAttr,r=i.classAttr;e(Sn(En.loginEnter.keywords,n)||Sn(En.loginEnter.class,r))}))]}))}))}function ni(i){return e(this,void 0,void 0,(function(){var e,r,o,a,s;return n(this,(function(n){switch(n.label){case 0:return e=i.event,r=i.targetDomInfo,o=i.currentClientMsg,a=e.target,o.currentProcess?[3,2]:[4,ei(a,r)];case 1:if(n.sent())return s=wn(e),[2,{flag:!0,info:{eventInfo:t(t({},s),{buttonType:U.LoginEnter}),currentProcess:{currentProcess:U.LoginEnter}}}];n.label=2;case 2:return[2]}}))}))}function ii(t,i){return e(this,void 0,void 0,(function(){var e,r,o,a,s,l,u,c,d,f,p,h,_,y,m,g;return n(this,(function(n){switch(n.label){case 0:return(e=t.target)?(r=In(e),[4,Ln(o={event:t,targetDomInfo:r,currentClientMsg:i})]):[2,null];case 1:return(null==(a=n.sent())?void 0:a.flag)?[2,null==a?void 0:a.info]:[4,zn(o)];case 2:return(null==(s=n.sent())?void 0:s.flag)?[2,null==s?void 0:s.info]:[4,Nn(o)];case 3:return(null==(l=n.sent())?void 0:l.flag)?[2,null==l?void 0:l.info]:[4,Vn(o)];case 4:return(null==(u=n.sent())?void 0:u.flag)?[2,null==u?void 0:u.info]:[4,Gn(o)];case 5:return(null==(c=n.sent())?void 0:c.flag)?[2,null==c?void 0:c.info]:[4,Un(o)];case 6:return(null==(d=n.sent())?void 0:d.flag)?[2,null==d?void 0:d.info]:[4,qn(o)];case 7:return(null==(f=n.sent())?void 0:f.flag)?[2,null==f?void 0:f.info]:[4,Xn(o)];case 8:return(null==(p=n.sent())?void 0:p.flag)?[2,null==p?void 0:p.info]:[4,ti(o)];case 9:return(null==(h=n.sent())?void 0:h.flag)?[2,null==h?void 0:h.info]:[4,jn(o)];case 10:return(null==(_=n.sent())?void 0:_.flag)?[2,null==_?void 0:_.info]:[4,Bn(o)];case 11:return(null==(y=n.sent())?void 0:y.flag)?[2,null==y?void 0:y.info]:[4,Qn(o)];case 12:return(null==(m=n.sent())?void 0:m.flag)?[2,null==m?void 0:m.info]:[4,ni(o)];case 13:return(null==(g=n.sent())?void 0:g.flag)?[2,null==g?void 0:g.info]:[2,{eventInfo:{},currentProcess:{}}]}}))}))}var ri=function(){function r(){this.rules=[],this.initialized=!1,this.currentRule=null,this.currentStructure={}}return r.prototype.processCurrentPage=function(t,i){return e(this,void 0,Promise,(function(){var e;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.rules=Array.isArray(t)?t:[],this.initialized=!0,[4,this.initializeForCurrentPage()];case 1:return n.sent(),this.currentProcess=Q(i),[3,3];case 2:return e=n.sent(),console.error(\"processCurrentPage failed:\",e),[3,3];case 3:return[2]}}))}))},r.prototype.initializeForCurrentPage=function(){var t;return e(this,void 0,Promise,(function(){var e,i,r,o;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e=window.location.href,i=this,[4,this.getRuleByUrl(e)];case 1:return i.currentRule=n.sent(),r=this,[4,this.getFilteredRule(null===(t=this.currentRule)||void 0===t?void 0:t.structure)];case 2:return r.currentStructure=n.sent(),[3,4];case 3:return o=n.sent(),console.error(\"Failed to initialize AI recognition for current page:\",o),[3,4];case 4:return[2]}}))}))},r.prototype.getRuleByUrl=function(t){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,Z.matchRule(t,this.rules)||null]}))}))},r.prototype.getFilteredRule=function(t){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,t&&\"string\"==typeof t?JSON.parse(t):{}]}))}))},r.prototype.getElementByFieldName=function(t,e){var n=e||this.currentRule||void 0;if(!n)return null;var i=(\"string\"==typeof n.structure?JSON.parse(n.structure):{}).form[t]||{};if(!i)return null;try{var r;if(i.selector_rule)if(r=document.querySelector(i.selector_rule))return r;if(i.id)if(r=document.getElementById(i.id))return r;return null}catch(e){return console.error(\"Error finding element for field \".concat(t,\":\"),e),null}},r.prototype.updateCurrentProcess=function(e){this.currentProcess=t(t({},this.currentProcess),e)},r.prototype.isElementMatchingRule=function(t,e){var n,r;try{var o=function(t,e){return(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id)||(null==e?void 0:e.selector_rule)&&t.matches(null==e?void 0:e.selector_rule)},a=!1;if(pt(e))try{for(var s=i(e),l=s.next();!l.done;l=s.next()){if(o(t,l.value)){a=!0;break}}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}else a=o(t,e);return a}catch(t){return console.error(\"Error matching element with rule:\",t),!1}},r.prototype.handlePaymentClick=function(i,r){var o,a;return e(this,void 0,void 0,(function(){var e,s,l,u,c,d,f,p,h,_,y,m,g;return n(this,(function(n){switch(n.label){case 0:return this.currentProcess=vn(Q(r),this.currentProcess,(function(t,e){return e&&\"unknown\"!==e?e:t})),e=this.currentProcess,s=e.currentProcess,l=e.currentParty,u=e.currentMethod,c=i.target,d=X[s],f=Ge(this.currentStructure,d.aiRuleKey||[],{}),p=!1,f&&(null==d?void 0:d.aiRuleKey)&&(null===(o=null==d?void 0:d.aiRuleKey)||void 0===o?void 0:o.length)>0&&(p=this.isElementMatchingRule(c,f)),s!==U.Unknown&&p?(h=t({event:s,params:{type:l,method:u}},null===(a=null==d?void 0:d.getParty)||void 0===a?void 0:a.call(d,f)),_=wn(i),[2,{toClientInfo:t(t({},h),{recognizedBy:\"landing page brain rules\"}),eventInfo:t(t({buttonType:null==h?void 0:h.event,paymentType:h.params.method},_),{recognizedBy:\"landing page brain rules\"})}]):[3,1];case 1:return[4,ii(i,this.currentProcess)];case 2:return y=n.sent(),m=y.eventInfo,g=y.currentProcess,this.currentProcess=t(t({},this.currentProcess),g),[2,{toClientInfo:{event:this.currentProcess.currentProcess,params:{type:this.currentProcess.currentParty,method:this.currentProcess.currentMethod},recognizedBy:\"js rules\"},eventInfo:t(t({},m),{recognizedBy:\"js rules\"})}]}}))}))},r}();function oi(t){var e,n,i;window.JSBridge||a(),t&&t.event&&(null===(e=t.params)||void 0===e?void 0:e.method)&&(null===(i=null===(n=null===window||void 0===window?void 0:window.JSBridge)||void 0===n?void 0:n.call)||void 0===i||i.call(n,\"loginPaymentMonitorTrigger\",t,(function(){})))}new(function(){function r(t,e,n){void 0===n&&(n={first_page:1,platform:-1});var i=this;this.executed=!1,this.iframescope=[],this.iframeDataList=[],this.selected=null,this.click_type=-1,this.showAutoFillPopup=!1,this.autoFillStatus=0,this.version=\"version_20251118_0.5884034175209747\",this.js_from=\"cdn\",this.aiStructureDistributed=!1,this.lastAIStructurePayload=null,this.lastRecognitionType=null,this.clickOrigin=null,this.clickSource=null,this.autofill_saved_data={},this.is_use_contact_autofill=0,this.is_use_payment_autofill=0,this._throttledHandleAutoFillRequest=function(t,e,n){var i=!1;return function(r){i||(t.call(n,r),i=!0,setTimeout((function(){i=!1}),e))}}(this.handleAutoFillRequest,100,this),this._clickData=null,this.all_input_fields=[],this.editListenerAttached=new WeakSet,this.detected_forms=[],this.detected_input_fields=[],this._is_have_submit=!1,this.submitted=!1;try{console.log(\"version:\"+(new Date).toISOString()+\" \"+this.version),console.log(\"[AutoFill2][\".concat(window===window.top?\"MAIN\":\"IFRAME\",\"] constructor init at \").concat((new Date).toISOString(),\" url=\").concat(window.location.href)),this.initAutofillInfo(t,e,n),this.initClientPaymentMsg(n),this.aiClickManager=new ri,this.iframeBridge=new c,this.aiFormUtils=new K,window.__LP_SEND_EVENT_V3=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=!1);try{i.sendEventV3(t,e,n)}catch(t){console.warn(\"[AutoFill2] __LP_SEND_EVENT_V3 failed:\",t)}},this.addClickEvent(),this.addNativeUpdateEvent(),this.sendEventV3(\"lp_js_init_success\",{js_version:this.version,js_from:this.js_from})}catch(t){this.sendEventV3(\"lp_js_init_fail\",{code:0,fail_reason:JSON.stringify({fail_reason:t.message,stack:t.stack}),js_version:this.version,js_from:this.js_from})}}return r.prototype.initClientPaymentMsg=function(t){var e=\"string\"==typeof t?JSON.parse(t):t;console.log(111111111111,\"in iframe?\",window===window.top,\"client inject extra info\",t),this.clientPaymentMsg=e},r.prototype.initAutofillInfo=function(t,e,n){void 0===n&&(n={first_page:1,platform:-1}),u.ins.initAdInfo(t,n),this._data=u.ins,this.setAutofillInfo(e)},r.prototype.setAutofillInfo=function(t){u.ins.initAutofillInfo(t)},r.prototype.initAutoFill=function(t){return e(this,void 0,void 0,(function(){var e,i,r,o,a,l,c,d,f,p,h,_;return n(this,(function(n){switch(n.label){case 0:return this.executed?[3,4]:window===window.top?[3,2]:(this.executed=!0,[4,(y=200,void 0===y&&(y=1e3),new Promise((function(t,e){setTimeout((function(){t()}),y)})))]);case 1:if(n.sent(),e=document.querySelectorAll(\"form\"),this.formList=e,i=Array.from(e),r=A(i),o=r.support_autofill,a=r.autofill_fields_list,l=r.all_out_scope_autofill,c=r.all_autofill_scope,d=r.have_hiden,this.iframescope=a,f=document.querySelectorAll(\"input\"),!o){for(p=[],h=0;h<f.length;h++)null===f[h].closest(\"form\")&&(_=T(f[h]))&&(p.push(_),this.iframescope.push(_));0===p.length&&this.iframeBridge.postMessageToMainFrame(s.IFRAME_NO_SCOPE,{all_out_scope_autofill:l,all_autofill_scope:c,url:window.location.href,path:new URL(window.location.href).pathname})}if(u.ins.iframeScope=this.iframescope,this.iframescope.length>0&&this.iframeBridge.postMessageToMainFrame(s.IFRAME_HAVE_SCOPE,{iframescope:this.iframescope,have_hiden:d,url:window.location.href,path:new URL(window.location.href).pathname}),f.length<1)return[2];n.label=2;case 2:return[4,this.handShake()];case 3:n.sent(),n.label=4;case 4:return window===window.top&&this.checkPageInfo(t),[2]}var y}))}))},r.prototype.checkPageInfo=function(e){var n=this,r=document.querySelectorAll(\"form\");if(this.formList=r,this.executed){var o=document.querySelectorAll(\"form\");if(function(t,e){var n,r,o=new Set(Array.from(t,(function(t){return t.outerHTML}))),a=new Set(Array.from(e,(function(t){return t.outerHTML})));if(o.size!==a.size)return!1;try{for(var s=i(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(!a.has(u))return!1}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return!0}(o,this.formList)&&this._data.mainframe_load>0)return;this.formList=o}else this.formList=document.querySelectorAll(\"form\");this.executed=!0;var l=A(Array.from(r)),u=l.all_autofill_scope,c=l.all_out_scope_autofill,d=l.contactinfo_scope_fileds,f=l.paymentinfo_scope_fileds,p=l.support_autofill,h=l.support_contact,_=l.support_payment,y=l.recognition_attribute_status_,m=l.recognition_regtags_status_,g=l.recognition_type_,v=-1;\"complete\"===e?v=1:\"interactive\"===e&&(v=2);var b=document.querySelectorAll(\"iframe\"),w={autofill_scope_fields:JSON.stringify(u),out_scope_input_fields:JSON.stringify(c),support_autofill:p?1:0,support_contact:h?1:0,support_payment:_?1:0,contactinfo_scope_fileds:JSON.stringify(d),paymentinfo_scope_fileds:JSON.stringify(f),iframeList:b.length>0?1:0,report_from:e,report_time:v,mainframe_load:this._data.mainframe_load,recognition_attribute_status:y,recognition_regtags_status:m,recognition_type:g};2==this._data.platform&&window==window.top?(window.JSBridge||a(),window.JSBridge.call(\"getWebViewExtraInfo\",{test:\"t\"},(function(e){var i=\"string\"==typeof e?JSON.parse(e):e;n._data.is_first_page=i?i.first_page:-1,window.JSBridge||a(),n.clientPaymentMsg=t(t({},n.clientPaymentMsg),i),n.setAutofillInfo(i.autofillInfo),n.iframeBridge.postMessageToIframes(s.RESET_DATA,{info:i.autofillInfo}),n.sendEventV3(\"lp_inject_js_form_info\",w)}))):1==this._data.platform&&window==window.top&&this.sendEventV3(\"lp_inject_js_form_info\",w)},r.prototype.handShake=function(){var e=this;this.iframeBridge.initHandshake(),this.sendEventV3=this.sendEventV3.bind(this),this.iframeBridge.onHandshake2Complete=function(t){e.initAutofillInfo(t.adInfo,t.autoFillInfo,t.extraData)},this.iframeBridge.removeSelect=function(){e.selected=null},this.iframeBridge.onGet=function(t,n,i){var r;e.clickOrigin&&e.clickSource&&(e.clickOrigin!=n||e.clickSource!=i)&&(null===(r=e.clickSource)||void 0===r||r.postMessage({event_name:s.MAIN_TO_IFRAME_REMOVESELECT},e.clickOrigin)),e.clickOrigin=n,e.clickSource=i,e.selected=null,e.click_type=t.click_type,e.clickTag=t.tag,0==t.support_autofill?e._data.noKeyReason=0:1==t.support_autofill?e._data.noKeyReason=2:2==t.support_autofill&&(e._data.noKeyReason=-1),t.isSelectEmpty?e.callJSBBridge(t.autofillFields,void 0,t.tag,t.click_type,t.field,1):e.sendTextClick(t.tag,t.autofillFields),e.sendEventV3(\"lp_click_input\",{report_time:2,support_autofill:t.pointData.support_autofill,click_input_status:t.pointData.click_input_status,is_should_detect:t.pointData.is_should_detect,can_autofill:t.pointData.can_autoFill,click_autofill_field:t.pointData.tag,is_field_include:t.pointData.is_field_include,is_value_empty:t.pointData.is_value_empty,is_in_iframe:1,autofill_field:t.tag,recognition_attribute_status:t.pointData.recognition_attribute_status,recognition_regtags_status:t.pointData.recognition_regtags_status,recognition_type:t.pointData.recognition_type||\"\"}),oi({event:U.LoginInput,params:{type:e.clientPaymentMsg.login_type,method:e.clientPaymentMsg.login_method}})},this.iframeBridge.onTrigger=function(t){1==t.autofillData.isAutofillAll?e.insertInput(t.autofillData,e.selected):e.setSingleValue(t.autofillData),e.selected=null},this.iframeBridge.onSetFocus=function(){e.selected&&e.selected.focus()},this.iframeBridge.resetData=function(t){e.setAutofillInfo(t.info)},this.iframeBridge.onIframeSendClick=function(t){e.sendTextClick(t.tag,t.autofillFields)},this.iframeBridge.onGetSubmit=function(){var t;if(e.formList&&e.formList.length>0){var n=e.setSubmit(),i=n.contact_info,r=n.payment_info,o=n.autofill_scope_fields,a=n.out_scope_input_fields;null===(t=window.top)||void 0===t||t.postMessage({event_name:s.RECEIVE_SUBMIT,contact_info:i,payment_info:r,autofill_scope_fields:o,out_scope_input_fields:a},\"*\")}},this.iframeBridge.onHandshake1=function(t,n,i){try{if(window===window.top&&e.aiStructureDistributed&&e.lastAIStructurePayload){var r=JSON.parse(e.lastAIStructurePayload);console.log(\"[AutoFill2][MAIN] singlecast SET_AI_STRUCTURE to new iframe\",{origin:n,keys:Object.keys((null==r?void 0:r.form)||{})}),null==i||i.postMessage({event_name:s.SET_AI_STRUCTURE,structure:r},n)}}catch(t){console.log(\"[AutoFill2][MAIN] onHandshake1 error\",t)}},this.iframeBridge.onSetAIStructure=function(t){try{if(window!==window.top){var n=(t||{}).structure;n&&(console.log(\"[AutoFill2][IFRAME] onSetAIStructure: applying structure\",{keys:Object.keys((null==n?void 0:n.form)||{})}),e.aiFormUtils.setExternalStructure(n))}}catch(t){e.sendEventV3(\"lp_ai_structure_receive_fail\",{code:\"ai_iframe_receive_error\",fail_reason:JSON.stringify({msg:null==t?void 0:t.message})})}},this.iframeBridge.onReceiveSubmit=function(t){e.iframeDataList.push({contact_info:t.contact_info,payment_info:t.payment_info,autofill_scope_fields:t.autofill_scope_fields,out_scope_input_fields:t.out_scope_input_fields}),e.autofillFormSubmitCallback(e.event)},this.iframeBridge.onIframeSubmit=function(){e.throttledHandleAutoFillSubmit()},this.iframeBridge.sendEventV3=this.sendEventV3.bind(this),this.iframeBridge.onAutofillPopupChange=function(t){e.showAutoFillPopup=t.showAutoFillPopup},this.iframeBridge.onIframeSendToJSB=function(e){var n=e.jsbName,i=e.msg;!function(t,e){var n,i,r;window.JSBridge||a(),e&&e.event&&(null===(n=e.params)||void 0===n?void 0:n.method)&&(null===(r=null===(i=null===window||void 0===window?void 0:window.JSBridge)||void 0===i?void 0:i.call)||void 0===r||r.call(i,t,e,(function(){})))}(n,t(t({},i),{jsMsgFrom:\"iframe\"}))}},r.prototype.throttledHandleAutoFillSubmit=function(t){void 0===t&&(t=null),this._is_have_submit||this.autofillFormSubmitCallback(t)},r.prototype.addNativeUpdateEvent=function(){window.__autoFillCallback__=this.autoFillCallback.bind(this),window.__AutoFillPopupClose__=this.AutoFillPopupClose.bind(this),window.__rejectUseAutofill__=this.rejectUseAutofill.bind(this),window.__updatePipoPaymentCount__=this.updatePipoPaymentCount.bind(this),window.__autoFillInfoChange__=this.autoFillInfoChange.bind(this),window.__shopifyNativeSubmit__=this.shopifyNativeSubmit.bind(this),window.__loginPaymentStatusCallback__=this.loginPaymentStatusCallback.bind(this)},r.prototype.autoFillCallback=function(t){var e,n=this,i=\"string\"==typeof t?JSON.parse(t):t;if(\"AI_AUTOFILL\"!==i.scene)try{var r=this.iframeBridge.iframeSourceList;if(window===window.top){try{1==(\"string\"==typeof t?JSON.parse(t):t).isAutofillAll?this.insertInput(t,this.selected):this.selected&&this.setSingleValue(t),this.selected=null}catch(t){this.sendEventV3(\"lp_js_run_fail\",{code:\"5\",fail_reason:JSON.stringify({msg:t.message,stack:t.stack})})}try{for(var o=0;o<r.length;o++)r[o].origin&&r[o].source&&(null===(e=r[o].source)||void 0===e||e.postMessage({event_name:s.TRIGGER,autofillData:t},r[o].origin))}catch(t){this.sendEventV3(\"lp_js_run_fail\",{code:\"5.1\",fail_reason:JSON.stringify({msg:t.message,stack:t.stack})})}}}catch(t){this.sendEventV3(\"lp_js_run_fail\",{code:\"2\",fail_reason:JSON.stringify({msg:t.message,stack:t.stack})})}else try{var a=[];i.data&&(a=\"string\"==typeof i.data?JSON.parse(i.data):i.data||[]),i.aiRecognitionInfo&&(a=\"string\"==typeof i.aiRecognitionInfo?JSON.parse(i.aiRecognitionInfo):i.aiRecognitionInfo||[]),console.log(\"AI_AUTOFILL scene detected\"),window===window.top&&(this.aiClickManager.processCurrentPage(a,this.clientPaymentMsg),this.aiFormUtils.processCurrentPage(a).then((function(){try{var t=n.aiFormUtils.getCurrentStructure();if(!t)return void console.log(\"No AI structure found for current page\");var e=JSON.stringify(t);if(n.lastAIStructurePayload===e&&n.aiStructureDistributed)return;n.lastAIStructurePayload=e,n.aiStructureDistributed=!0,n.iframeBridge.postMessageToIframes(s.SET_AI_STRUCTURE,{structure:t}),console.log(\"[AutoFill2][MAIN] broadcast SET_AI_STRUCTURE\",{iframeCount:n.iframeBridge.iframeSourceList.length,keys:Object.keys((null==t?void 0:t.form)||{})})}catch(t){n.sendEventV3(\"lp_ai_structure_distribute_fail\",{code:\"ai_main_distribute_error\",fail_reason:JSON.stringify({msg:null==t?void 0:t.message})})}})).catch((function(t){n.sendEventV3(\"lp_ai_structure_distribute_fail\",{code:\"ai_main_distribute_error\",fail_reason:JSON.stringify({msg:null==t?void 0:t.message})})})))}catch(t){console.log(\"AI_AUTOFILL initialization error:\",t)}},r.prototype.insertInput=function(t,e){var n,i,r={},o=\"string\"==typeof t?JSON.parse(t):t;if(!o.paymentInfo||\"\"!=o.paymentInfo.cardNumber&&null!=o.paymentInfo.cardNumber){o.contactInfo&&(this.autofill_saved_data.concat_info=o.contactInfo,this.is_use_contact_autofill=1),o.paymentInfo&&(this.autofill_saved_data.payment_info=o.paymentInfo,this.is_use_payment_autofill=1);var a=0,l=!0;if(r=o.contactInfo?o.contactInfo:o.paymentInfo,o.paymentInfo){var u=r.expiryTime.split(\"/\"),c=u[1].slice(-2),d=u[0]+\"/\"+c;r.exp_date=d,r.exp_month=u[0],r.exp_year=c}this.formList=document.querySelectorAll(\"form\");var f={},p=Object.keys(r);try{var h=this.aiFormUtils.getAllMatchingElements();p.forEach((function(t){var e=h[t];e&&L(e)&&(f[t]=[e])}))}catch(t){}var _=p.filter((function(t){return!f||!f[t]||0===f[t].length}));if(_.length>0){for(var y=0;y<this.formList.length;y++)f=I(this.formList[y],!0,_,!1,f);var m=document.querySelectorAll(\"input\");for(y=0;y<m.length;y++)k(m[y],f)||(f=P(m[y],!0,_,f))}var v=function(t){if(r[t]){var n=r[t];if(\"mobile\"===t){var i=n.split(/\\s+/);n=i[i.length-1]}f[t].forEach((function(t){t!==e&&t.value?(t===e&&t.value!=n||t.value!=n&&o.paymentInfo)&&(a+=1,S(t,n),setTimeout((function(){t.value=n}),0)):(a+=1,S(t,n),setTimeout((function(){t.value=n}),0),t.value!==n&&(l=!1)),t.dispatchEvent(new Event(\"input\",{bubbles:!0})),t.dispatchEvent(new Event(\"change\",{bubbles:!0})),t.dispatchEvent(new Event(\"click\",{bubbles:!0})),t.dispatchEvent(new Event(\"touchstart\",{bubbles:!0})),t.focus(),t.blur()}))}};for(var b in f)v(b);var w=[],T=[];if(e){var E=g(e);w=E.autofill_scope_fields,T=E.out_scope_input_fields}var A=o.scene?o.scene:-1,F=o.isAutofillAll?o.isAutofillAll:-1,M=o.currentKey?o.currentKey:\"null\",O={popup_type:0,autofill_fields:o.autofillFields?o.autofillFields.toString():\"null\",user_autofill_fields:JSON.stringify(Object.keys(f)),autofill_scope_count:w.length,autofill_out_scope_count:T.length,autofill_count:a,autofill_success:l,infoType:this.click_type.toString(),autofill_key:D(f).toString(),input_key:D(f).toString(),scene:A.toString(),is_autofill_all:F,current_key:M,show_autofill_all:o.currentKey?1:0,no_key_reason:o.noKeyReason,recognition_type:this.lastRecognitionType||\"\"},N=vn(Q(this.clientPaymentMsg),null===(n=this.aiClickManager)||void 0===n?void 0:n.currentProcess,(function(t,e){return e&&\"unknown\"!==e?e:t}));console.log(0xa1b01d4b1c7,\"autofill payment\",N),window===window.top?(O.is_in_iframe=0,this.sendEventV3(\"lp_js_autofill_success\",O),(null==O?void 0:O.autofill_success)&&(null==N?void 0:N.currentProcess.startsWith(\"payment\"))&&oi({event:U.PaymentAutofillInput,params:{type:null==N?void 0:N.currentParty,method:null==N?void 0:N.currentMethod},recognizedBy:\"js rules: auto filled success\"})):a>0&&(null==N?void 0:N.currentProcess.startsWith(\"payment\"))&&(O.is_in_iframe=1,null===(i=window.top)||void 0===i||i.postMessage({event_name:s.TRIGGER_AUTOFILL_SUBMIT,point_data:O,paymentInfo:{event:U.PaymentAutofillInput,params:{type:null==N?void 0:N.currentParty,method:null==N?void 0:N.currentMethod},recognizedBy:\"js rules: auto filled success in iframe\"}},\"*\")),this.autoFillStatus=1,this.attachEditListenersForAutofilledFields()}},r.prototype.setSingleValue=function(t){var e,n=\"string\"==typeof t?JSON.parse(t):t,i=\"\",r=\"\";if(n.contactInfo?(r=Object.keys(n.contactInfo)[0],i=n.contactInfo[r]):n.paymentInfo&&(r=Object.keys(n.paymentInfo)[0],i=n.paymentInfo[r]),this.selected){var o=E(this.selected);n.currentKey&&n.currentKey;S(this.selected,i);var a=this.selected;setTimeout((function(){a.value=i,console.log(a.value)}),0);var l={input_key:r,autofill_key:null==o?void 0:o.key,scene:(n.scene?n.scene:-1).toString(),is_autofill_all:0,infoType:this.click_type.toString(),current_key:n.currentKey,no_key_reason:n.noKeyReason,show_autofill_all:n.currentKey?1:0,autofill_fields:n.autofillFields?n.autofillFields.toString():\"null\",recognition_type:this.lastRecognitionType||\"\"};window===window.top?this.sendEventV3(\"lp_js_autofill_success\",l):(l.is_in_iframe=1,null===(e=window.top)||void 0===e||e.postMessage({event_name:s.TRIGGER_AUTOFILL_SUBMIT,point_data:l},\"*\")),a.dispatchEvent(new Event(\"input\",{bubbles:!0})),a.dispatchEvent(new Event(\"change\",{bubbles:!0})),a.dispatchEvent(new Event(\"click\",{bubbles:!0})),a.dispatchEvent(new Event(\"touchstart\",{bubbles:!0})),this.selected.focus(),this.selected.blur(),this.autoFillStatus=1,this.attachEditListenersForAutofilledFields()}},r.prototype.updatePipoPaymentCount=function(t){u.ins.updatePipoPaymentCount(t),this.iframeBridge.postMessageToIframes(s.SET_IFRAME_DATA,{type:1,pipo_paymentInfo_status:this._data.pipo_paymentInfo_status,paymentField:this._data.paymentField,pipo_payment_count:this._data.pipo_payment_count})},r.prototype.shopifyNativeSubmit=function(){this.throttledHandleAutoFillSubmit()},r.prototype.loginPaymentStatusCallback=function(e){console.log(11111111111,\"login payment cb\",e);var n=\"string\"==typeof e?JSON.parse(e):e;this.clientPaymentMsg=t(t({},this.clientPaymentMsg),n)},r.prototype.AutoFillPopupClose=function(){this.showAutoFillPopup=!1},r.prototype.autoFillInfoChange=function(t){var e=\"string\"==typeof t?JSON.parse(t):t,n=e.autoFillInfo,i=e.changeFrom;this.setAutofillInfo(n),this.iframeBridge.postMessageToIframes(s.RESET_DATA,{info:n}),this.sendEventV3(\"lp_autofill_info_reset\",{change_from:i})},r.prototype.rejectUseAutofill=function(){this.selected&&this.selected.focus(),this.iframeBridge.postMessageToIframes(s.SET_FOCUS,{}),this._clickData&&window.JSBridge.call(\"iabEditTextClick\",this._clickData,(function(){}))},r.prototype.addClickEvent=function(){window.addEventListener(\"click\",this.onClick.bind(this)),window.addEventListener(\"focusin\",this.onClick.bind(this)),window.addEventListener(\"mousedown\",this.handlePaymentClick.bind(this)),window.addEventListener(\"click\",this.handlePaymentClick.bind(this))},r.prototype.removeClickEvent=function(){window.removeEventListener(\"click\",this.onClick.bind(this)),window.removeEventListener(\"focusin\",this.onClick.bind(this))},r.prototype.throttledHandleAutoFillRequest=function(t){this._throttledHandleAutoFillRequest(t)},r.prototype.onClick=function(t){(window===window.top||window!==window.top&&this.iframeBridge.status===l.FULFILLED)&&this.throttledHandleAutoFillRequest(t)},r.prototype.handlePaymentClick=function(t){return e(this,void 0,void 0,(function(){var e,i,r;return n(this,(function(n){switch(n.label){case 0:return console.log(0xa1b01d4b1c7,\"client msg\",this.clientPaymentMsg,this.aiClickManager.currentProcess),[4,this.aiClickManager.handlePaymentClick(t,this.clientPaymentMsg)];case 1:return e=n.sent(),i=e.toClientInfo,r=e.eventInfo,console.log(0x650e124ef1c7,\"outer to client\",i),console.log(0x650e124ef1c7,\"outer event\",r),(null==i?void 0:i.event)&&Y.includes(null==i?void 0:i.event)&&(window===window.top?oi(i):this.iframeBridge.postMessageToMainFrame(s.IFRAME_TO_JSB,{msg:i,jsbName:\"loginPaymentMonitorTrigger\"})),r&&(null==r?void 0:r.buttonType)&&(window===window.top?this.sendEventV3(s.LP_BUTTON_CLICK,r):this.iframeBridge.postMessageToMainFrame(s.LP_BUTTON_CLICK,{eventInfo:r})),[2]}}))}))},r.prototype.onBlur=function(){this.selected=null},r.prototype.handleAutoFillRequest=function(t){var e;try{var n=null==t?void 0:t.target;if(n&&L(n)&&(\"click\"==t.type||\"touchstart\"==t.type||\"focusin\"==t.type)){if(n.form instanceof HTMLFormElement){var i=n.form;i.removeEventListener(\"submit\",this.autofillFormSubmitCallback.bind(this)),i.addEventListener(\"submit\",this.autofillFormSubmitCallback.bind(this))}this.selected=n,this.clickOrigin&&this.clickSource&&(null===(e=this.clickSource)||void 0===e||e.postMessage({event_name:s.MAIN_TO_IFRAME_REMOVESELECT},this.clickOrigin),this.clickOrigin=null,this.clickSource=null);var r=E(n),o=(null==r?void 0:r.key)||null,a=null;try{a=this.aiFormUtils.getAITagFromInputOptimized(n)}catch(t){console.log(\"AI recognition error:\",t)}var l=null;o&&a?o===a?(l=r,this.lastRecognitionType=\"ai+rule\",console.log(\"Rule and AI recognition are consistent, using:\",o)):(l={key:a,is_new_attribute:!1,is_new_regtags:!1},this.lastRecognitionType=\"ai\",console.log(\"Rule and AI recognition differ, prefer AI:\",{ruleKey:o,aiKey:a})):a?(l={key:a,is_new_attribute:!1,is_new_regtags:!1},this.lastRecognitionType=\"ai\",console.log(\"Only AI recognition succeeded:\",a)):o?(l=r,this.lastRecognitionType=\"rule\",console.log(\"Only rule recognition succeeded:\",o)):(this.lastRecognitionType=null,console.log(\"Both rule and AI recognition failed\")),this.clickHandle(l,n,t.type)}}catch(t){this.sendEventV3(\"lp_js_run_fail\",{js_fail_code:\"0\",fail_reason:JSON.stringify({fail_reason:t.message,stack:t.stack})})}},r.prototype.clickHandle=function(t,e,n){var i,r,o,a,l,u=null==t?void 0:t.key,c=(null==t?void 0:t.is_new_attribute)?2:1,d=(null==t?void 0:t.is_new_regtags)?2:1,f=[];if(this.click_type=-1,this.clickTag=u,u)if(\"cardNumber\"==u||\"exp_month\"==u||\"exp_year\"==u||\"exp_date\"==u){if(0!=this._data.paymentInfo_status&&0!=this._data.pipo_paymentInfo_status||(f=this._data.Payment_Field,this.click_type=_),!this._data.switchPayment)return this._data.noKeyReason=1,void(window===window.top?this.sendTextClick(null,[]):this.iframeBridge.postMessageToMainFrame(s.IFRAME_TO_MAIN_SENDCLICK,{tag:null,autofillFields:[]}))}else if(0==this._data.contactInfo_status&&(f=this._data.autoFillField,this.click_type=y),!this._data.switchContact)return this._data.noKeyReason=1,void(window===window.top?this.sendTextClick(null,[]):this.iframeBridge.postMessageToMainFrame(s.IFRAME_TO_MAIN_SENDCLICK,{tag:null,autofillFields:[]}));var p,h=function(t,e,n){var i={},r=t.form instanceof HTMLFormElement?t.form:null;if(!r){var o=T(t);return o&&n.includes(o)?(i[o]=[t],i):null}return I(r,e,n)}(this.selected,!1,f);this.allInputTagMap=h,u&&f.includes(u)&&(null===this.selected.value||\"\"===this.selected.value||this.selected.value.match(/^[ ]*$/))&&(p=this.detect(this.selected,this.click_type));var m={is_should_detect:Number(p),can_autoFill:Number(this._data.canAutoFill),tag:u,is_field_include:Number(f.includes(u)),is_value_empty:Number(null===this.selected.value||\"\"===this.selected.value||this.selected.value.match(/^[ ]*$/))},g=0,v=u;v?(g=1,this._data.noKeyReason=2,f.find((function(t){return t===v}))&&(g=2,this._data.noKeyReason=-1)):this._data.noKeyReason=0;var b={report_time:2,support_autofill:g,autofill_field:v||\"\",click_input_status:JSON.stringify({id:null===(i=this.selected)||void 0===i?void 0:i.id,type:null===(r=this.selected)||void 0===r?void 0:r.type,placeholder:null===(o=this.selected)||void 0===o?void 0:o.placeholder,name:null===(a=this.selected)||void 0===a?void 0:a.name}),is_should_detect:m.is_should_detect,can_autofill:m.can_autoFill,click_autofill_field:m.tag,is_field_include:m.is_field_include,is_value_empty:m.is_value_empty,is_in_iframe:0,recognition_attribute_status:c,recognition_regtags_status:d,login_type:this.clientPaymentMsg.login_type,login_id:this.clientPaymentMsg.login_id,login_method:this.clientPaymentMsg.login_method,recognition_type:this.lastRecognitionType||\"\",event_type:n};this.sendNewInputLog(this.selected,m);var w=D(h);if(window!==window.top){var S=this.click_type;this.click_type==_&&(w=this._data.Payment_Field);var k;return k=null===this.selected.value||\"\"===this.selected.value||this.selected.value.match(/^[ ]*$/),void(null===(l=window.top)||void 0===l||l.postMessage({event_name:s.GET,autofillFields:w,click_type:S,field:f,tag:u,pointData:b,isSelectEmpty:k,support_autofill:g},\"*\"))}this.sendEventV3(\"lp_click_input\",b),oi({event:U.LoginInput,params:{type:this.clientPaymentMsg.login_type,method:this.clientPaymentMsg.login_method}}),p&&h&&0!==Object.keys(h).length&&this._data.canAutoFill&&u&&f.includes(u)&&(null===this.selected.value||\"\"===this.selected.value||this.selected.value.match(/^[ ]*$/))?this.callJSBBridge(D(h),this.selected,u,this.click_type,f,0,b):2==g?(w.includes(u)||w.push(u),this.sendTextClick(u,w)):(0==g&&(this._data.noKeyReason=0),this.sendTextClick(null,[]))},r.prototype.callJSBBridge=function(t,e,n,i,r,o,s){var l=this;if(void 0===n&&(n=\"\"),void 0===i&&(i=-1),t.length>0)if(!this.showAutoFillPopup&&this._data.switchAutoFill&&this._data.is_need_popup){window.JSBridge||a(),this.showAutoFillPopup=!0;var u=(new Date).getTime(),c=[];i==y&&(c=this._data.autoFillField),window.JSBridge.call(\"showAutofillPopup\",{popupType:0,autofillFields:t,contactInfoFields:c,popupJsbStartTime:u,infoType:i,autofillField:n,firstPage:this._data.is_first_page},(function(t){var n=t.code,i=(new Date).getTime();1===Number(n)?(l.autoFillStatus=2,l.showAutoFillPopup=!0,null==e||e.blur()):l.showAutoFillPopup=!1,t.show_autofill_code=t.code.toString(),t.msg||(t.msg=\"-1\"),t.show_fail_msg=t.msg,t.popup_type=0,t.cost=i-u,t.infoType=l.click_type.toString(),t.autofill_key=c,l.sendEventV3(\"lp_js_call_showAutofillPopup_jsb\",t)}))}else this.showAutoFillPopup||this.sendEventV3(\"lp_js_call_showAutofillPopup_jsb\",{code:0,msg:\"autofillPopup has show\"}),this._data.is_need_popup||this.sendEventV3(\"lp_popup_show\",{fail_reason:this._data.fail_reason});this.sendTextClick(n,t)},r.prototype.sendTextClick=function(t,e){var n=2;this.click_type!=_&&this.click_type!=y||(n=this.click_type);var r=[],o=[];this.click_type==y?(r=e,o=this._data.autoFillField):this.click_type==_&&(r=e,o=e);var s=function(t,e){var n,r;void 0===e&&(e=[\"first_name\",\"last_name\",\"address\",\"unit\",\"city\",\"zip_code\",\"country\",\"email\",\"mobile\"]);var o=[];try{for(var a=i(e),s=a.next();!s.done;s=a.next()){var l=s.value;t.includes(l)&&o.push(l)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o}(this._data.is_need_show_contactall?o:r);t&&(this._data.noKeyReason=-1),this._clickData={identify:t?1:0,messageType:n,currentKey:t||\"\",autofillFields:s,noKeyReason:this._data.noKeyReason,messageField:t||\"\"},window.JSBridge||a(),window.JSBridge.call(\"iabEditTextClick\",this._clickData,(function(){}))},r.prototype.sendNewInputLog=function(t,e,n){var i=this;try{var r=!1,o=t.form instanceof HTMLFormElement?t.form:null;if(o){var a=o.getElementsByTagName(\"input\");Array.from(a).forEach((function(t){i.all_input_fields.includes(t)||(i.all_input_fields.push(t),r=!0)}))}else this.all_input_fields.includes(t)||(this.all_input_fields.push(t),r=!0);if(r){var s,l=g(t),u=l.autofill_scope_fields,c=l.out_scope_input_fields,d=(l.autofill_fields,l.paymentinfo_fileds),f=l.contactinfo_fileds,p=l.recognition_regtags_status,h=l.recognition_attribute_status,_=l.recognition_type,y=[],m=[],v=[],b=[],w=!1,S=!1;f.find((function(t){return i._data.autoFillField.find((function(e){return e===t}))}))&&0==this._data.contactInfo_status&&(w=!0),(d.length>0&&0==this._data.paymentInfo_status||0==this._data.pipo_paymentInfo_status)&&(S=!0),s=w||S,y=y.concat(u),m=m.concat(c),v=v.concat(f),b=b.concat(d),this.sendEventV3(\"lp_inject_js_form_info\",{autofill_scope_fields:JSON.stringify(y),out_scope_input_fields:JSON.stringify(m),support_autofill:s?1:0,support_contact:w?1:0,support_payment:S?1:0,contactinfo_scope_fileds:JSON.stringify(v),paymentinfo_scope_fileds:JSON.stringify(b),report_time:0,report_from:\"click\",mainframe_load:this._data.mainframe_load,recognition_regtags_status:p,recognition_attribute_status:h,recognition_type:_})}}catch(t){this.sendEventV3(\"lp_js_run_fail\",{js_fail_code:\"3\",fail_reason:JSON.stringify({fail_reason:t.message,stack:t.stack})})}},r.prototype.attachEditListenersForAutofilledFields=function(){var t=this;try{(this.all_input_fields||[]).forEach((function(e){var n=e;if(n&&!t.editListenerAttached.has(n)){n.addEventListener(\"change\",(function(){var e,i=\"\";try{i=t.aiFormUtils.getAITagFromInputOptimized(n)||\"\"}catch(t){var r=E(n);i=(null==r?void 0:r.key)||\"\"}var o={edit_field:i,recognition_type:t.lastRecognitionType||\"\",is_in_iframe:window===window.top?0:1};window===window.top?t.sendEventV3(\"lp_edit_input_info\",o):null===(e=window.top)||void 0===e||e.postMessage({event_name:s.IFRAME_TO_MAIN_EDITINPUT,point_data:o},\"*\")})),t.editListenerAttached.add(n)}}))}catch(t){}},r.prototype.detect=function(t,e){var n,r,o,a,s=this;try{var l=t.form instanceof HTMLFormElement?t.form:null,u=!0;if(l)try{for(var c=i(this.detected_forms),d=c.next();!d.done;d=c.next()){if(d.value==l){!1;break}}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}var f=!0;try{for(var p=i(this.detected_input_fields),h=p.next();!h.done;h=p.next()){if(h.value===t){f=!1,u=!1;break}}}catch(t){o={error:t}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}if(l){this.detected_forms.push(l);var _=l.getElementsByTagName(\"input\");Array.from(_).filter((function(t){return x(t)})).forEach((function(t){!s.detected_input_fields.includes(t)&&function(t,e){var n=T(t);return 0==e?\"cardNumber\"!=n&&\"exp_month\"!=n&&\"exp_year\"!=n&&\"exp_date\"!=n:1==e?\"cardNumber\"==n||\"exp_month\"==n||\"exp_year\"==n||\"exp_date\"==n:void 0}(t,e)&&s.detected_input_fields.push(t)}))}return f&&this.detected_input_fields.push(t),u}catch(t){this.sendEventV3(\"lp_js_run_fail\",{js_fail_code:\"4\",fail_reason:JSON.stringify({fail_reason:t.message,stack:t.stack})})}},r.prototype.autofillFormSubmitCallback=function(t){var e,n,i=this;this.formList=document.querySelectorAll(\"form\"),this._is_have_submit=!0;try{if(window!==window.top)return void(null===(e=window.top)||void 0===e||e.postMessage({event_name:s.IFRAME_SUBMIT},\"*\"));if(this.iframeBridge.iframeSourceList.length>0&&0===this.iframeDataList.length){for(var r=0;r<this.iframeBridge.iframeSourceList.length;r++)null===(n=this.iframeBridge.iframeSourceList[r].source)||void 0===n||n.postMessage({event_name:s.GET_SUBMIT},this.iframeBridge.iframeSourceList[r].origin);return}if(this.iframeBridge.iframeSourceList.length>0&&this.iframeDataList.length>0&&this.iframeDataList.length!==this.iframeBridge.iframeSourceList.length)return;var o=this.setSubmit(),l=o.contact_info,u=o.payment,c=o.payment_info,d=o.infoType,f=o.autofillInputValues,p=o.autofill_scope_fields,h=o.out_scope_input_fields,_=!this.submitted;this.submitted=!0;var y=function(t,e,n){var i=[],r=n.contactInfo;if(null!=r&&null!=r)for(var o in r)t[o]&&t[o]!=r[o]&&i.push(o);var a=n.paymentInfo;if(null!=a&&null!=a)for(var o in a)e[o]&&e[o]!=a[o]&&i.push(o);return i}(l,c,this.autofill_saved_data);if(this.sendEventV3(\"lp_js_form_submission_action\",{autofill_scope_fields:JSON.stringify(p),out_scope_input_fields:JSON.stringify(h),autofill_valid_scope_fields:JSON.stringify(Object.keys(f)),autoFillStatus:this.autoFillStatus,first_submit:_?1:0,report_time:0,infoType:d,update_key:JSON.stringify(y),iframe_scope_length:this.iframeBridge.iframeSourceList.length,is_use_contact_autofill:this.is_use_contact_autofill,is_use_payment_autofill:this.is_use_payment_autofill,login_type:this.clientPaymentMsg.login_type,login_id:this.clientPaymentMsg.login_id,login_method:this.clientPaymentMsg.login_method}),oi({event:U.LoginSubmit,params:{type:this.clientPaymentMsg.login_type,method:this.clientPaymentMsg.login_method},recognizedBy:\"js rules: auto fill lp_js_form_submission_action\"}),!f||0===Object.keys(f).length)return;if(-1==d)return;if(!this.showAutoFillPopup&&this._data.switchAutoFill){window.JSBridge||a(),this.showAutoFillPopup=!0;var m=(new Date).getTime();window.JSBridge.call(\"showAutofillPopup\",{popupType:1,popupJsbStartTime:m,extraInfo:JSON.stringify({}),infoType:d,contactInfo:l,paymentInfo:u,firstPage:this._data.is_first_page},(function(t){var e=t.code,n=(new Date).getTime();t.cost=n-m,1===Number(e)?i.showAutoFillPopup=!0:i.showAutoFillPopup=!1,t.show_autofill_code=t.code.toString(),t.msg||(t.msg=\"-1\"),t.show_fail_msg=t.msg,t.popup_type=1,t.firstSubmit=_?1:0,t.infoType=d.toString(),i.sendEventV3(\"lp_js_call_showAutofillPopup_jsb\",t)}))}else this.sendEventV3(\"lp_js_call_showAutofillPopup_jsb\",{code:0,msg:\"autofillPopupHasShow\"})}catch(t){this.sendEventV3(\"lp_js_run_fail\",{js_fail_code:\"1\",fail_reason:JSON.stringify({fail_reason:t.message,stack:t.stack})})}},r.prototype.setSubmit=function(t){void 0===t&&(t=[]);for(var e=t.length>0?t:this.formList,n=[],i=[],r={},o=0;o<e.length;o++){r=m(e[o],r);var a=b(e[o]),s=a.autofill_scope_fields,l=a.out_scope_input_fields;n=n.concat(s),i=i.concat(l)}var u,c={},d={};for(var f in r)if(\"exp_date\"!=f)if(\"cardNumber\"!=f){if(\"exp_month\"!=f&&\"exp_year\"!=f)c[f]=r[f];else if(B(r[f].replace(/\\s+/g,\"\"))){h=r[f].replace(/\\s+/g,\"\");d[f]=h,\"exp_year\"==f&&(d[f]=2==h.length?\"20\"+h:h)}}else B(u=r[f].replace(/\\s+/g,\"\"))&&!(u.length<13||u.length>19)&&(d[f]=r[f].replace(/\\s+/g,\"\"));else{var p=r[f].split(\"/\"),h=p[0].replace(/\\s+/g,\"\");d.exp_month=h;var _=p[1].replace(/\\s+/g,\"\"),y=2==_.length?\"20\"+_:_;d.exp_year=y}if(this.iframeDataList.length>0)for(o=0;o<this.iframeDataList.length;o++){var g=this.iframeDataList[o].contact_info,v=this.iframeDataList[o].payment_info;if(g&&0!==Object.keys(g).length)for(var f in this.setObj(c,g),c)c.hasOwnProperty(f)&&!r.hasOwnProperty(f)&&(r[f]=c[f]);if(v&&0!==Object.keys(v).length)for(var f in this.setObj(d,v),d)d.hasOwnProperty(f)&&!r.hasOwnProperty(f)&&(r[f]=d[f]);n=n.concat(this.iframeDataList[o].autofill_scope_fields),i=i.concat(this.iframeDataList[o].out_scope_input_fields)}var w=function(t,e){var n=[],i=e.paymentInfo;if(null!=i&&null!=i)for(var r in i)t[r]&&t[r]!=i[r]&&n.push(r);return n.length>0}(d,this.autofill_saved_data),S=-1;3==Object.keys(d).length&&!w&&Object.keys(c).length>0?S=2:3==Object.keys(d).length&&w?S=1:Object.keys(c).length>0&&(S=0);var k,I={};if(d.cardNumber){var P=\"4\"==(k=d.cardNumber).substring(0,1)?\"VISA\":\"5\"==k.substring(0,1)?\"MASTER\":\"35\"==k.substring(0,2)?\"JBC\":\"34\"==k.substring(0,2)||\"37\"==k.substring(0,2)?\"AE\":\"DISCOVER\";I.cardNumber=d.cardNumber,I.cardType=P}if(d.exp_month&&d.exp_year){var T=d.exp_month+\"/\"+d.exp_year;I.expiryTime=T}return{contact_info:c,payment:I,payment_info:d,infoType:S,autofillInputValues:r,autofill_scope_fields:n,out_scope_input_fields:i}},r.prototype.setObj=function(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])},r.prototype.sendEventV3=function(e,n,i){void 0===n&&(n={});try{if(window===window.top){var r=t({url:location.href,web_url:u.ins.adInfo.web_url,contactInfo_fields:JSON.stringify(u.ins.autoFillField),contactInfo_status:u.ins.contactInfo_status.toString(),paymentInfo_status:u.ins.paymentInfo_status.toString(),pipo_payment_info_status:u.ins.pipo_paymentInfo_status,pipo_card_count:u.ins.pipo_payment_count,pv_id:u.ins.pv_id,first_page:u.ins.is_first_page,iframe_scope_length:this.iframeBridge.iframeSourceList.length,autofill_card_count:u.ins.paymentCount,js_version:this.version,js_from:this.js_from,mainframe_load:u.ins.mainframe_load,ready_state:document.readyState},n);!function(t,e){var n,i=\"undefined\"!=typeof __PIA_WORKER__?new Function(\"return this\")():\"undefined\"!=typeof window?window:{};i.JS2NativeBridge&&i.JS2NativeBridge._invokeMethod?n=function(t){return i.JS2NativeBridge._invokeMethod(JSON.stringify(t))}:i.ToutiaoJSBridge&&i.ToutiaoJSBridge.invokeMethod?n=function(t){return i.ToutiaoJSBridge.invokeMethod(JSON.stringify(t))}:i.JS2NativeBridge&&i.JS2NativeBridge.call?n=function(t){return i.JS2NativeBridge.call(t.func,JSON.stringify(t))}:i.webkit&&i.webkit.messageHandlers&&i.webkit.messageHandlers.callMethodParams?n=function(t){i.webkit.messageHandlers.callMethodParams.postMessage(t)}:i.callMethodParams&&(n=function(t){return i.callMethodParams(t.func,t)}),n({func:t,params:e,JSSDK:\"2.0.0\",__msg_type:\"call\",__callback_id:\"-1\"})}(\"sendLog\",{labelName:e,eventName:\"ad_wap_stat\",is_ad_event:1,value:u.ins.adInfo.cid,extJson:{category:\"event_v3\",tag:\"ad_wap_stat\",refer:\"autofill\",nt:4,is_ad_event:1,value:u.ins.adInfo.cid,log_extra:u.ins.adInfo.log_extra,ad_extra_data:JSON.stringify(r)}})}}catch(t){}},r.prototype.addStateChange=function(){var t=this;document.addEventListener(\"readystatechange\",(function(){\"complete\"!==document.readyState&&\"interactive\"!==document.readyState||t.initAutoFill(document.readyState)}))},r.prototype.registerForPageComplete=function(){var t=this;try{if(window.__initAutoFill__)return;window.__initAutoFill__=!0,window===window.top?\"complete\"===document.readyState?this.initAutoFill(document.readyState):\"interactive\"===document.readyState?(this.initAutoFill(document.readyState),this.addStateChange()):this.addStateChange():\"complete\"===document.readyState?this.initAutoFill(document.readyState):document.addEventListener(\"readystatechange\",(function(){\"complete\"===document.readyState&&t.initAutoFill(document.readyState)}))}catch(t){this.sendEventV3(\"lp_js_init_fail\",{code:1,fail_reason:JSON.stringify({msg:t.message,stack:t.stack})})}},r}())(getClientContext().adInfo,getClientContext().autoFillInfo,getClientContext().extraData).registerForPageComplete()}();"

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    return-object v0
.end method

.method public final LJI()Ljava/lang/String;
    .locals 1

    const-string v0, "_jsmanage_ad_autofill_sixthversion"

    return-object v0
.end method
